{"ast":null,"code":"import React,{useEffect,useState}from'react';import{MessageCircle,User as UserIcon}from'lucide-react';import{getStaffList}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StaffMemberCard=_ref=>{let{member}=_ref;const sendWhatsApp=(phone,name)=>{if(!phone)return;const msg=encodeURIComponent(`היי ${name}, יש לך משימה חדשה במערכת. נא להיכנס לפורטל.`);window.open(`https://wa.me/${phone.replace(/\\D/g,'')}?text=${msg}`,'_blank');};const status=member.status==='Busy'?'במשימה':'פנוי/ה';const isBusy=member.status==='Busy';return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-100 p-5 rounded-3xl shadow-sm hover:shadow-md transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-2xl\",children:/*#__PURE__*/_jsx(UserIcon,{className:\"text-gray-400\",size:24})}),/*#__PURE__*/_jsx(\"span\",{className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase ${isBusy?'bg-amber-50 text-amber-600':'bg-green-50 text-green-600'}`,children:status})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-black text-gray-800 mb-1\",children:member.name||member.id}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400 mb-4 font-medium\",children:[(member.role||'Staff').toUpperCase(),member.current_property&&` • ${member.current_property}`]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mt-auto\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>sendWhatsApp(member.phone,member.name),disabled:!member.phone,className:\"flex-1 flex items-center justify-center gap-2 bg-[#25D366] text-white py-2 rounded-xl text-xs font-bold hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(MessageCircle,{size:14}),\"\\u05E9\\u05DC\\u05D7 WhatsApp\"]})})]});};const StaffGrid=()=>{const[staff,setStaff]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{let mounted=true;const load=async()=>{try{const data=await getStaffList();if(mounted)setStaff(Array.isArray(data)?data:[]);}catch(e){if(mounted)setStaff([]);}finally{if(mounted)setLoading(false);}};load();return()=>{mounted=false;};},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-6\",children:\"\\u05E6\\u05D5\\u05D5\\u05EA \\u05E9\\u05D8\\u05D7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"py-8 text-center text-gray-400\",children:\"\\u05D8\\u05D5\\u05E2\\u05DF...\"})]});}if(staff.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-6\",children:\"\\u05E6\\u05D5\\u05D5\\u05EA \\u05E9\\u05D8\\u05D7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"py-8 text-center text-gray-400\",children:\"\\u05D0\\u05D9\\u05DF \\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05E8\\u05E9\\u05D5\\u05DE\\u05D9\\u05DD\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-6\",children:\"\\u05E6\\u05D5\\u05D5\\u05EA \\u05E9\\u05D8\\u05D7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:staff.map(member=>/*#__PURE__*/_jsx(StaffMemberCard,{member:member},member.id))})]});};export default StaffGrid;export{StaffMemberCard};","map":{"version":3,"names":["React","useEffect","useState","MessageCircle","User","UserIcon","getStaffList","jsx","_jsx","jsxs","_jsxs","StaffMemberCard","_ref","member","sendWhatsApp","phone","name","msg","encodeURIComponent","window","open","replace","status","isBusy","className","children","size","id","role","toUpperCase","current_property","type","onClick","disabled","StaffGrid","staff","setStaff","loading","setLoading","mounted","load","data","Array","isArray","e","length","map"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/components/dashboard/StaffGrid.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { MessageCircle, User as UserIcon } from 'lucide-react';\nimport { getStaffList } from '../../services/api';\n\nconst StaffMemberCard = ({ member }) => {\n  const sendWhatsApp = (phone, name) => {\n    if (!phone) return;\n    const msg = encodeURIComponent(`היי ${name}, יש לך משימה חדשה במערכת. נא להיכנס לפורטל.`);\n    window.open(`https://wa.me/${phone.replace(/\\D/g, '')}?text=${msg}`, '_blank');\n  };\n\n  const status = member.status === 'Busy' ? 'במשימה' : 'פנוי/ה';\n  const isBusy = member.status === 'Busy';\n\n  return (\n    <div className=\"bg-white border border-gray-100 p-5 rounded-3xl shadow-sm hover:shadow-md transition-all\">\n      <div className=\"flex justify-between items-start mb-4\">\n        <div className=\"bg-gray-50 p-3 rounded-2xl\">\n          <UserIcon className=\"text-gray-400\" size={24} />\n        </div>\n        <span className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase ${\n          isBusy ? 'bg-amber-50 text-amber-600' : 'bg-green-50 text-green-600'\n        }`}>\n          {status}\n        </span>\n      </div>\n\n      <h4 className=\"text-lg font-black text-gray-800 mb-1\">{member.name || member.id}</h4>\n      <p className=\"text-xs text-gray-400 mb-4 font-medium\">\n        {(member.role || 'Staff').toUpperCase()}\n        {member.current_property && ` • ${member.current_property}`}\n      </p>\n\n      <div className=\"flex gap-2 mt-auto\">\n        <button\n          type=\"button\"\n          onClick={() => sendWhatsApp(member.phone, member.name)}\n          disabled={!member.phone}\n          className=\"flex-1 flex items-center justify-center gap-2 bg-[#25D366] text-white py-2 rounded-xl text-xs font-bold hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <MessageCircle size={14} />\n          שלח WhatsApp\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst StaffGrid = () => {\n  const [staff, setStaff] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let mounted = true;\n    const load = async () => {\n      try {\n        const data = await getStaffList();\n        if (mounted) setStaff(Array.isArray(data) ? data : []);\n      } catch (e) {\n        if (mounted) setStaff([]);\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    };\n    load();\n    return () => { mounted = false; };\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\">\n        <h3 className=\"text-xl font-bold text-gray-800 mb-6\">צוות שטח</h3>\n        <div className=\"py-8 text-center text-gray-400\">טוען...</div>\n      </div>\n    );\n  }\n\n  if (staff.length === 0) {\n    return (\n      <div className=\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\">\n        <h3 className=\"text-xl font-bold text-gray-800 mb-6\">צוות שטח</h3>\n        <div className=\"py-8 text-center text-gray-400\">אין עובדים רשומים</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 bg-white rounded-3xl border border-gray-100 shadow-sm\">\n      <h3 className=\"text-xl font-bold text-gray-800 mb-6\">צוות שטח</h3>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {staff.map((member) => (\n          <StaffMemberCard key={member.id} member={member} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default StaffGrid;\nexport { StaffMemberCard };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}