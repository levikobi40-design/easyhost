{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\hotel_ai_assistant\\\\hotel_dashboard\\\\src\\\\components\\\\dashboard\\\\PremiumDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { CheckCircle, Clock, DollarSign, Activity, Home, Users, Phone, MessageCircle } from 'lucide-react';\nimport { toWhatsAppPhone } from '../../utils/phone';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell, Legend } from 'recharts';\nimport { getDashboardSummary, getStatsSummary, getPropertyTasks, updatePropertyTaskStatus } from '../../services/api';\nimport StaffGrid from './StaffGrid';\nimport AirbnbImporter from './AirbnbImporter';\nimport GuestChatFeed from '../guest/GuestChatFeed';\nimport PropertyCreatorModal from './PropertyCreatorModal';\nimport TaskListErrorBoundary from '../common/TaskListErrorBoundary';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TASK_CHART_COLORS = ['#3b82f6', '#10b981'];\nconst PIE_COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899'];\n\n/** Always return a string for rendering - prevents [object Object] crash */\nconst safeStr = (val, fallback = '') => {\n  var _ref, _val$content;\n  if (val == null) return fallback;\n  if (typeof val === 'string') return val;\n  if (typeof val === 'object') return safeStr((_ref = (_val$content = val.content) !== null && _val$content !== void 0 ? _val$content : val.title) !== null && _ref !== void 0 ? _ref : val.text, fallback);\n  return String(val);\n};\nconst TaskTimeline = ({\n  tasks,\n  loading,\n  onToggleStatus = () => {}\n}) => {\n  const mapStatus = s => {\n    if (!s) return 'pending';\n    if (s === 'Done' || s === 'done' || s === 'Completed' || s === 'completed') return 'completed';\n    if (s === 'Seen' || s === 'seen') return 'seen';\n    return 'pending';\n  };\n  const formatTime = dueAt => {\n    if (!dueAt) return '—';\n    try {\n      const d = new Date(dueAt);\n      return d.toLocaleTimeString('he-IL', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return typeof dueAt === 'string' && dueAt.length >= 16 ? dueAt.slice(11, 16) : '—';\n    }\n  };\n  const list = Array.isArray(tasks) ? tasks.slice(0, 12) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl shadow-xl border border-gray-700/50 dark:border-gray-600/50 backdrop-blur-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-100 dark:text-white\",\n        children: \"\\u05E8\\u05E9\\u05D9\\u05DE\\u05EA \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs font-semibold rounded-full border border-emerald-500/30\",\n        children: \"LIVE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-8 text-center text-gray-400 dark:text-gray-500\",\n      children: \"\\u05D8\\u05D5\\u05E2\\u05DF...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this) : list.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-8 text-center text-gray-400 dark:text-gray-500\",\n      children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05DB\\u05E8\\u05D2\\u05E2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: list.map((task, index) => {\n        var _ref2, _task$property_name, _task$property_contex, _task$staff_name, _task$staff_phone, _task$staff_phone2, _task$staff_phone3, _task$staff_phone4, _task$staff_name2, _ref3, _task$description;\n        const status = mapStatus(task.status);\n        const displayName = safeStr((_ref2 = (_task$property_name = task.property_name) !== null && _task$property_name !== void 0 ? _task$property_name : task.propertyName) !== null && _ref2 !== void 0 ? _ref2 : task.room) || 'נכס';\n        const capacity = safeStr((_task$property_contex = task.property_context) !== null && _task$property_contex !== void 0 ? _task$property_contex : task.propertyContext) || '';\n        const timeStr = formatTime(task.due_at || task.created_at);\n        const isDone = status === 'completed';\n        const isSeen = status === 'seen';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex gap-4 p-4 rounded-2xl bg-gray-800/60 dark:bg-gray-700/40 border border-gray-700/50 dark:border-gray-600/40 hover:border-gray-600/60 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `z-10 w-9 h-9 rounded-xl flex items-center justify-center shrink-0 ${isDone ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30' : isSeen ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30' : 'bg-amber-500/20 text-amber-400 border border-amber-500/30'}`,\n            children: isDone ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(Clock, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-bold text-gray-100 dark:text-white truncate\",\n                  children: displayName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 23\n                }, this), capacity && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-400 dark:text-gray-400 mt-0.5\",\n                  children: capacity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500 dark:text-gray-400 shrink-0\",\n                children: timeStr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 dark:text-gray-400\",\n                children: safeStr((_task$staff_name = task.staff_name) !== null && _task$staff_name !== void 0 ? _task$staff_name : task.staffName) || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 21\n              }, this), ((_task$staff_phone = task.staff_phone) !== null && _task$staff_phone !== void 0 ? _task$staff_phone : task.staffPhone) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `tel:${safeStr((_task$staff_phone2 = task.staff_phone) !== null && _task$staff_phone2 !== void 0 ? _task$staff_phone2 : task.staffPhone).replace(/\\D/g, '')}`,\n                  className: \"text-xs font-medium text-blue-400 hover:text-blue-300 hover:underline inline-flex items-center gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(Phone, {\n                    size: 12\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 27\n                  }, this), safeStr((_task$staff_phone3 = task.staff_phone) !== null && _task$staff_phone3 !== void 0 ? _task$staff_phone3 : task.staffPhone)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `https://wa.me/${toWhatsAppPhone((_task$staff_phone4 = task.staff_phone) !== null && _task$staff_phone4 !== void 0 ? _task$staff_phone4 : task.staffPhone)}?text=${encodeURIComponent(`Hi ${safeStr((_task$staff_name2 = task.staff_name) !== null && _task$staff_name2 !== void 0 ? _task$staff_name2 : task.staffName)}, you have a task: ${safeStr((_ref3 = (_task$description = task.description) !== null && _task$description !== void 0 ? _task$description : task.title) !== null && _ref3 !== void 0 ? _ref3 : task.content).slice(0, 120)}`)}`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"text-green-500 hover:text-green-400 inline-flex\",\n                  title: \"WhatsApp\",\n                  children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 flex flex-wrap gap-2\",\n              children: [!isDone && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [!isSeen && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => onToggleStatus(task.id, 'Seen'),\n                  className: \"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-blue-400 hover:bg-blue-500/20 border border-blue-500/30 transition-colors\",\n                  children: \"\\u05E8\\u05D0\\u05D9\\u05EA\\u05D9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => onToggleStatus(task.id, 'Done'),\n                  className: \"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/30 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 27\n                  }, this), \" \\u05D1\\u05D5\\u05E6\\u05E2\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true), isDone && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => onToggleStatus(task.id, 'Pending'),\n                className: \"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-amber-400 hover:bg-amber-500/20 border border-amber-500/30 transition-colors\",\n                children: \"\\u05D7\\u05D6\\u05E8\\u05D4 \\u05DC\\u05DE\\u05DE\\u05EA\\u05D9\\u05DF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this)]\n        }, (task === null || task === void 0 ? void 0 : task.id) != null && typeof task.id !== 'object' ? String(task.id) : `task-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_c = TaskTimeline;\nconst KPICard = ({\n  title,\n  value,\n  icon: Icon,\n  color\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white dark:bg-gray-800 p-6 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center gap-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-12 h-12 rounded-2xl flex items-center justify-center ${color}`,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      size: 24\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-400 dark:text-gray-400 font-medium\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-2xl font-black text-gray-100 dark:text-white\",\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 161,\n  columnNumber: 3\n}, this);\n_c2 = KPICard;\nconst QuickActionStaff = ({\n  topStaff\n}) => {\n  const callPhone = phone => {\n    if (!phone) return;\n    window.location.href = `tel:${phone.replace(/\\D/g, '')}`;\n  };\n  if (!(topStaff !== null && topStaff !== void 0 && topStaff.length)) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Phone, {\n        size: 20,\n        className: \"text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), \"\\u05E7\\u05E9\\u05E8 \\u05DE\\u05D4\\u05D9\\u05E8\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: topStaff.map((s, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium text-gray-100 dark:text-white\",\n          children: s.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `tel:${(s.phone || '').replace(/\\D/g, '')}`,\n          onClick: e => {\n            e.preventDefault();\n            callPhone(s.phone);\n          },\n          className: \"text-blue-600 dark:text-blue-400 font-medium text-sm hover:underline\",\n          children: s.phone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n_c3 = QuickActionStaff;\nexport default function PremiumDashboard() {\n  _s();\n  var _summary$revenue, _stats$total_properti, _stats$total_capacity, _stats$tasks_by_statu, _stats$tasks_by_statu2;\n  const [summary, setSummary] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [importSuccess, setImportSuccess] = useState(0);\n  const [showPropertyModal, setShowPropertyModal] = useState(false);\n  const loadRef = useRef(0);\n  useEffect(() => {\n    let cancelled = false;\n    const loadId = ++loadRef.current;\n    setLoading(true);\n    Promise.all([getDashboardSummary(), getStatsSummary(), getPropertyTasks()]).then(([s, st, t]) => {\n      if (!cancelled && loadId === loadRef.current) {\n        setSummary(s !== null && s !== void 0 ? s : null);\n        setStats(st !== null && st !== void 0 ? st : null);\n        setTasks(Array.isArray(t) ? t : []);\n      }\n    }).catch(e => {\n      if (!cancelled && loadId === loadRef.current) {\n        setSummary({\n          revenue: '0₪',\n          active_tasks_count: 0,\n          status: 'Unavailable'\n        });\n        setStats({\n          total_properties: 0,\n          tasks_by_status: {\n            Pending: 0,\n            Done: 0\n          },\n          staff_workload: {},\n          total_capacity: 0,\n          top_staff: []\n        });\n        setTasks([]);\n      }\n    }).finally(() => {\n      if (!cancelled && loadId === loadRef.current) setLoading(false);\n    });\n    return () => {\n      cancelled = true;\n    };\n  }, [importSuccess]);\n  useEffect(() => {\n    const onTaskCreated = e => {\n      var _e$detail;\n      const newTask = e === null || e === void 0 ? void 0 : (_e$detail = e.detail) === null || _e$detail === void 0 ? void 0 : _e$detail.task;\n      if (newTask !== null && newTask !== void 0 && newTask.id) {\n        setTasks(prev => {\n          if ((prev !== null && prev !== void 0 ? prev : []).some(t => t.id === newTask.id)) return prev !== null && prev !== void 0 ? prev : [];\n          return [{\n            ...newTask,\n            status: newTask.status || 'Pending'\n          }, ...(prev !== null && prev !== void 0 ? prev : [])];\n        });\n      }\n      Promise.all([getStatsSummary(), getPropertyTasks()]).then(([st, t]) => {\n        if (st) setStats(st);\n        setTasks(Array.isArray(t) ? t : []);\n      });\n    };\n    window.addEventListener('maya-task-created', onTaskCreated);\n    return () => window.removeEventListener('maya-task-created', onTaskCreated);\n  }, []);\n  const handleToggleStatus = useCallback(async (taskId, newStatus) => {\n    try {\n      await updatePropertyTaskStatus(taskId, newStatus);\n      setTasks(prev => (prev !== null && prev !== void 0 ? prev : []).map(t => t.id === taskId ? {\n        ...t,\n        status: newStatus\n      } : t));\n    } catch (e) {\n      window.alert((e === null || e === void 0 ? void 0 : e.message) || 'Failed to update');\n    }\n  }, []);\n  const tasksByStatusData = stats !== null && stats !== void 0 && stats.tasks_by_status ? [{\n    name: 'ממתינות',\n    value: stats.tasks_by_status.Pending || 0,\n    fill: TASK_CHART_COLORS[0]\n  }, {\n    name: 'הושלמו',\n    value: stats.tasks_by_status.Done || 0,\n    fill: TASK_CHART_COLORS[1]\n  }] : [];\n  const staffWorkloadData = stats !== null && stats !== void 0 && stats.staff_workload ? Object.entries(stats.staff_workload).sort((a, b) => b[1] - a[1]).slice(0, 5).map(([name, count], i) => ({\n    name: name.length > 10 ? name.slice(0, 8) + '…' : name,\n    fullName: name,\n    tasks: count,\n    fill: PIE_COLORS[i % PIE_COLORS.length]\n  })) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 dark:bg-gray-900 p-8\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-end mb-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-black text-gray-900 dark:text-white\",\n          children: \"\\u05D1\\u05D5\\u05E7\\u05E8 \\u05D8\\u05D5\\u05D1, \\u05DE\\u05E0\\u05D4\\u05DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 dark:text-gray-400\",\n          children: \"\\u05DB\\u05DC \\u05D4\\u05E0\\u05DB\\u05E1\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA \\u05EA\\u05D7\\u05EA \\u05E9\\u05DC\\u05D9\\u05D8\\u05D4. \\u05D4\\u05E0\\u05D4 \\u05DE\\u05D4 \\u05E9\\u05E7\\u05D5\\u05E8\\u05D4 \\u05D4\\u05D9\\u05D5\\u05DD.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setShowPropertyModal(true),\n        className: \"bg-black dark:bg-white text-white dark:text-gray-900 px-6 py-3 rounded-2xl font-bold hover:opacity-90 transition-all\",\n        children: \"+ \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E0\\u05DB\\u05E1 \\u05D7\\u05D3\\u05E9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\",\n      children: [/*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05D4\\u05DB\\u05E0\\u05E1\\u05D5\\u05EA \\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\",\n        value: (_summary$revenue = summary === null || summary === void 0 ? void 0 : summary.revenue) !== null && _summary$revenue !== void 0 ? _summary$revenue : '₪0',\n        icon: DollarSign,\n        color: \"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05E0\\u05DB\\u05E1\\u05D9\\u05DD\",\n        value: String((_stats$total_properti = stats === null || stats === void 0 ? void 0 : stats.total_properties) !== null && _stats$total_properti !== void 0 ? _stats$total_properti : 0),\n        icon: Home,\n        color: \"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05E7\\u05D9\\u05D1\\u05D5\\u05DC\\u05EA \\u05DB\\u05D5\\u05DC\\u05DC\\u05EA\",\n        value: String((_stats$total_capacity = stats === null || stats === void 0 ? void 0 : stats.total_capacity) !== null && _stats$total_capacity !== void 0 ? _stats$total_capacity : 0),\n        icon: Users,\n        color: \"bg-violet-50 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA\",\n        value: String((_stats$tasks_by_statu = stats === null || stats === void 0 ? void 0 : (_stats$tasks_by_statu2 = stats.tasks_by_status) === null || _stats$tasks_by_statu2 === void 0 ? void 0 : _stats$tasks_by_statu2.Pending) !== null && _stats$tasks_by_statu !== void 0 ? _stats$tasks_by_statu : 0),\n        icon: Activity,\n        color: \"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2 space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(AirbnbImporter, {\n          onSuccess: () => setImportSuccess(n => n + 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800/60 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm p-6 min-h-[280px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-gray-100 dark:text-white mb-4\",\n              children: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05DC\\u05E4\\u05D9 \\u05E1\\u05D8\\u05D8\\u05D5\\u05E1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), tasksByStatusData.some(d => d.value > 0) ? /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n              width: \"100%\",\n              height: 200,\n              children: /*#__PURE__*/_jsxDEV(BarChart, {\n                data: tasksByStatusData,\n                layout: \"vertical\",\n                margin: {\n                  top: 5,\n                  right: 20,\n                  left: 0,\n                  bottom: 5\n                },\n                children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                  strokeDasharray: \"3 3\",\n                  stroke: \"#e5e7eb\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                  type: \"number\",\n                  stroke: \"#6b7280\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                  type: \"category\",\n                  dataKey: \"name\",\n                  width: 70,\n                  stroke: \"#6b7280\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  contentStyle: {\n                    backgroundColor: 'rgba(255,255,255,0.95)',\n                    border: '1px solid #e5e7eb',\n                    borderRadius: 8\n                  },\n                  formatter: value => [value, 'משימות']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                  dataKey: \"value\",\n                  name: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\",\n                  radius: [0, 4, 4, 0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\",\n              children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 min-h-[280px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4\",\n              children: \"\\u05E2\\u05D5\\u05DE\\u05E1 \\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), staffWorkloadData.length > 0 ? /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n              width: \"100%\",\n              height: 200,\n              children: /*#__PURE__*/_jsxDEV(PieChart, {\n                children: [/*#__PURE__*/_jsxDEV(Pie, {\n                  data: staffWorkloadData,\n                  dataKey: \"tasks\",\n                  nameKey: \"fullName\",\n                  cx: \"50%\",\n                  cy: \"50%\",\n                  outerRadius: 70,\n                  label: ({\n                    fullName,\n                    tasks: t\n                  }) => `${fullName}: ${t}`,\n                  children: staffWorkloadData.map((entry, i) => /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: entry.fill\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  formatter: (v, n, props) => [`${props.payload.fullName}: ${v} משימות`, '']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\",\n              children: \"\\u05D0\\u05D9\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StaffGrid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(TaskListErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(TaskTimeline, {\n            tasks: tasks !== null && tasks !== void 0 ? tasks : [],\n            loading: loading,\n            onToggleStatus: handleToggleStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuickActionStaff, {\n          topStaff: stats === null || stats === void 0 ? void 0 : stats.top_staff\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GuestChatFeed, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PropertyCreatorModal, {\n      isOpen: showPropertyModal,\n      onClose: () => setShowPropertyModal(false),\n      onSuccess: () => setImportSuccess(n => n + 1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n}\n_s(PremiumDashboard, \"hAP6sMSd8VM0bwV1tuoxdp6u3/g=\");\n_c4 = PremiumDashboard;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"TaskTimeline\");\n$RefreshReg$(_c2, \"KPICard\");\n$RefreshReg$(_c3, \"QuickActionStaff\");\n$RefreshReg$(_c4, \"PremiumDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","CheckCircle","Clock","DollarSign","Activity","Home","Users","Phone","MessageCircle","toWhatsAppPhone","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","PieChart","Pie","Cell","Legend","getDashboardSummary","getStatsSummary","getPropertyTasks","updatePropertyTaskStatus","StaffGrid","AirbnbImporter","GuestChatFeed","PropertyCreatorModal","TaskListErrorBoundary","jsxDEV","_jsxDEV","Fragment","_Fragment","TASK_CHART_COLORS","PIE_COLORS","safeStr","val","fallback","_ref","_val$content","content","title","text","String","TaskTimeline","tasks","loading","onToggleStatus","mapStatus","s","formatTime","dueAt","d","Date","toLocaleTimeString","hour","minute","length","slice","list","Array","isArray","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","task","index","_ref2","_task$property_name","_task$property_contex","_task$staff_name","_task$staff_phone","_task$staff_phone2","_task$staff_phone3","_task$staff_phone4","_task$staff_name2","_ref3","_task$description","status","displayName","property_name","propertyName","room","capacity","property_context","propertyContext","timeStr","due_at","created_at","isDone","isSeen","size","staff_name","staffName","staff_phone","staffPhone","href","replace","encodeURIComponent","description","target","rel","type","onClick","id","_c","KPICard","value","icon","Icon","color","_c2","QuickActionStaff","topStaff","callPhone","phone","window","location","i","name","e","preventDefault","_c3","PremiumDashboard","_s","_summary$revenue","_stats$total_properti","_stats$total_capacity","_stats$tasks_by_statu","_stats$tasks_by_statu2","summary","setSummary","stats","setStats","setTasks","setLoading","importSuccess","setImportSuccess","showPropertyModal","setShowPropertyModal","loadRef","cancelled","loadId","current","Promise","all","then","st","t","catch","revenue","active_tasks_count","total_properties","tasks_by_status","Pending","Done","staff_workload","total_capacity","top_staff","finally","onTaskCreated","_e$detail","newTask","detail","prev","some","addEventListener","removeEventListener","handleToggleStatus","taskId","newStatus","alert","message","tasksByStatusData","fill","staffWorkloadData","Object","entries","sort","a","b","count","fullName","dir","onSuccess","n","width","height","data","layout","margin","top","right","left","bottom","strokeDasharray","stroke","dataKey","contentStyle","backgroundColor","border","borderRadius","formatter","radius","nameKey","cx","cy","outerRadius","label","entry","v","props","payload","isOpen","onClose","_c4","$RefreshReg$"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/components/dashboard/PremiumDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { CheckCircle, Clock, DollarSign, Activity, Home, Users, Phone, MessageCircle } from 'lucide-react';\nimport { toWhatsAppPhone } from '../../utils/phone';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  Legend,\n} from 'recharts';\nimport { getDashboardSummary, getStatsSummary, getPropertyTasks, updatePropertyTaskStatus } from '../../services/api';\nimport StaffGrid from './StaffGrid';\nimport AirbnbImporter from './AirbnbImporter';\nimport GuestChatFeed from '../guest/GuestChatFeed';\nimport PropertyCreatorModal from './PropertyCreatorModal';\nimport TaskListErrorBoundary from '../common/TaskListErrorBoundary';\n\nconst TASK_CHART_COLORS = ['#3b82f6', '#10b981'];\nconst PIE_COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899'];\n\n/** Always return a string for rendering - prevents [object Object] crash */\nconst safeStr = (val, fallback = '') => {\n  if (val == null) return fallback;\n  if (typeof val === 'string') return val;\n  if (typeof val === 'object') return safeStr(val.content ?? val.title ?? val.text, fallback);\n  return String(val);\n};\n\nconst TaskTimeline = ({ tasks, loading, onToggleStatus = () => {} }) => {\n  const mapStatus = (s) => {\n    if (!s) return 'pending';\n    if (s === 'Done' || s === 'done' || s === 'Completed' || s === 'completed') return 'completed';\n    if (s === 'Seen' || s === 'seen') return 'seen';\n    return 'pending';\n  };\n\n  const formatTime = (dueAt) => {\n    if (!dueAt) return '—';\n    try {\n      const d = new Date(dueAt);\n      return d.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });\n    } catch {\n      return typeof dueAt === 'string' && dueAt.length >= 16 ? dueAt.slice(11, 16) : '—';\n    }\n  };\n\n  const list = Array.isArray(tasks) ? tasks.slice(0, 12) : [];\n\n  return (\n    <div className=\"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl shadow-xl border border-gray-700/50 dark:border-gray-600/50 backdrop-blur-sm\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-100 dark:text-white\">רשימת משימות</h3>\n        <span className=\"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs font-semibold rounded-full border border-emerald-500/30\">LIVE</span>\n      </div>\n      {loading ? (\n        <div className=\"py-8 text-center text-gray-400 dark:text-gray-500\">טוען...</div>\n      ) : list.length === 0 ? (\n        <div className=\"py-8 text-center text-gray-400 dark:text-gray-500\">אין משימות כרגע</div>\n      ) : (\n        <div className=\"space-y-4\">\n          {list.map((task, index) => {\n            const status = mapStatus(task.status);\n            const displayName = safeStr(task.property_name ?? task.propertyName ?? task.room) || 'נכס';\n            const capacity = safeStr(task.property_context ?? task.propertyContext) || '';\n            const timeStr = formatTime(task.due_at || task.created_at);\n            const isDone = status === 'completed';\n            const isSeen = status === 'seen';\n            return (\n              <div\n                key={task?.id != null && typeof task.id !== 'object' ? String(task.id) : `task-${index}`}\n                className=\"relative flex gap-4 p-4 rounded-2xl bg-gray-800/60 dark:bg-gray-700/40 border border-gray-700/50 dark:border-gray-600/40 hover:border-gray-600/60 transition-colors\"\n              >\n                <div\n                  className={`z-10 w-9 h-9 rounded-xl flex items-center justify-center shrink-0 ${\n                    isDone ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30' : isSeen ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30' : 'bg-amber-500/20 text-amber-400 border border-amber-500/30'\n                  }`}\n                >\n                  {isDone ? <CheckCircle size={18} /> : <Clock size={18} />}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex justify-between items-start gap-2\">\n                    <div>\n                      <p className=\"text-sm font-bold text-gray-100 dark:text-white truncate\">{displayName}</p>\n                      {capacity && (\n                        <p className=\"text-xs text-gray-400 dark:text-gray-400 mt-0.5\">{capacity}</p>\n                      )}\n                    </div>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400 shrink-0\">{timeStr}</span>\n                  </div>\n                  <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2\">\n                    <span className=\"text-xs text-gray-400 dark:text-gray-400\">{safeStr(task.staff_name ?? task.staffName) || '—'}</span>\n                    {(task.staff_phone ?? task.staffPhone) ? (\n                      <>\n                        <a\n                          href={`tel:${safeStr(task.staff_phone ?? task.staffPhone).replace(/\\D/g, '')}`}\n                          className=\"text-xs font-medium text-blue-400 hover:text-blue-300 hover:underline inline-flex items-center gap-1\"\n                        >\n                          <Phone size={12} />\n                          {safeStr(task.staff_phone ?? task.staffPhone)}\n                        </a>\n                        <a\n                          href={`https://wa.me/${toWhatsAppPhone(task.staff_phone ?? task.staffPhone)}?text=${encodeURIComponent(`Hi ${safeStr(task.staff_name ?? task.staffName)}, you have a task: ${safeStr(task.description ?? task.title ?? task.content).slice(0, 120)}`)}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-green-500 hover:text-green-400 inline-flex\"\n                          title=\"WhatsApp\"\n                        >\n                          <MessageCircle size={14} />\n                        </a>\n                      </>\n                    ) : null}\n                  </div>\n                  <div className=\"mt-3 flex flex-wrap gap-2\">\n                    {!isDone && (\n                      <>\n                        {!isSeen && (\n                          <button\n                            type=\"button\"\n                            onClick={() => onToggleStatus(task.id, 'Seen')}\n                            className=\"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-blue-400 hover:bg-blue-500/20 border border-blue-500/30 transition-colors\"\n                          >\n                            ראיתי\n                          </button>\n                        )}\n                        <button\n                          type=\"button\"\n                          onClick={() => onToggleStatus(task.id, 'Done')}\n                          className=\"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/30 transition-colors\"\n                        >\n                          <CheckCircle size={14} /> בוצע\n                        </button>\n                      </>\n                    )}\n                    {isDone && (\n                      <button\n                        type=\"button\"\n                        onClick={() => onToggleStatus(task.id, 'Pending')}\n                        className=\"inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg text-amber-400 hover:bg-amber-500/20 border border-amber-500/30 transition-colors\"\n                      >\n                        חזרה לממתין\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst KPICard = ({ title, value, icon: Icon, color }) => (\n  <div className=\"bg-white dark:bg-gray-800 p-6 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center gap-4\">\n    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center ${color}`}>\n      <Icon size={24} />\n    </div>\n    <div>\n      <p className=\"text-xs text-gray-400 dark:text-gray-400 font-medium\">{title}</p>\n      <h4 className=\"text-2xl font-black text-gray-100 dark:text-white\">{value}</h4>\n    </div>\n  </div>\n);\n\nconst QuickActionStaff = ({ topStaff }) => {\n  const callPhone = (phone) => {\n    if (!phone) return;\n    window.location.href = `tel:${phone.replace(/\\D/g, '')}`;\n  };\n  if (!topStaff?.length) return null;\n  return (\n    <div className=\"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm\">\n      <h3 className=\"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2\">\n        <Phone size={20} className=\"text-blue-500\" />\n        קשר מהיר\n      </h3>\n      <div className=\"space-y-3\">\n        {topStaff.map((s, i) => (\n          <div\n            key={i}\n            className=\"flex justify-between items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n          >\n            <span className=\"font-medium text-gray-100 dark:text-white\">{s.name}</span>\n            <a\n              href={`tel:${(s.phone || '').replace(/\\D/g, '')}`}\n              onClick={(e) => { e.preventDefault(); callPhone(s.phone); }}\n              className=\"text-blue-600 dark:text-blue-400 font-medium text-sm hover:underline\"\n            >\n              {s.phone}\n            </a>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default function PremiumDashboard() {\n  const [summary, setSummary] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [importSuccess, setImportSuccess] = useState(0);\n  const [showPropertyModal, setShowPropertyModal] = useState(false);\n  const loadRef = useRef(0);\n\n  useEffect(() => {\n    let cancelled = false;\n    const loadId = ++loadRef.current;\n    setLoading(true);\n    Promise.all([getDashboardSummary(), getStatsSummary(), getPropertyTasks()])\n      .then(([s, st, t]) => {\n        if (!cancelled && loadId === loadRef.current) {\n          setSummary(s ?? null);\n          setStats(st ?? null);\n          setTasks(Array.isArray(t) ? t : []);\n        }\n      })\n      .catch((e) => {\n        if (!cancelled && loadId === loadRef.current) {\n          setSummary({ revenue: '0₪', active_tasks_count: 0, status: 'Unavailable' });\n          setStats({ total_properties: 0, tasks_by_status: { Pending: 0, Done: 0 }, staff_workload: {}, total_capacity: 0, top_staff: [] });\n          setTasks([]);\n        }\n      })\n      .finally(() => {\n        if (!cancelled && loadId === loadRef.current) setLoading(false);\n      });\n    return () => { cancelled = true; };\n  }, [importSuccess]);\n\n  useEffect(() => {\n    const onTaskCreated = (e) => {\n      const newTask = e?.detail?.task;\n      if (newTask?.id) {\n        setTasks((prev) => {\n          if ((prev ?? []).some((t) => t.id === newTask.id)) return prev ?? [];\n          return [{ ...newTask, status: newTask.status || 'Pending' }, ...(prev ?? [])];\n        });\n      }\n      Promise.all([getStatsSummary(), getPropertyTasks()]).then(([st, t]) => {\n        if (st) setStats(st);\n        setTasks(Array.isArray(t) ? t : []);\n      });\n    };\n    window.addEventListener('maya-task-created', onTaskCreated);\n    return () => window.removeEventListener('maya-task-created', onTaskCreated);\n  }, []);\n\n  const handleToggleStatus = useCallback(async (taskId, newStatus) => {\n    try {\n      await updatePropertyTaskStatus(taskId, newStatus);\n      setTasks((prev) => (prev ?? []).map((t) => (t.id === taskId ? { ...t, status: newStatus } : t)));\n    } catch (e) {\n      window.alert(e?.message || 'Failed to update');\n    }\n  }, []);\n\n  const tasksByStatusData = stats?.tasks_by_status\n    ? [\n        { name: 'ממתינות', value: stats.tasks_by_status.Pending || 0, fill: TASK_CHART_COLORS[0] },\n        { name: 'הושלמו', value: stats.tasks_by_status.Done || 0, fill: TASK_CHART_COLORS[1] },\n      ]\n    : [];\n  const staffWorkloadData = stats?.staff_workload\n    ? Object.entries(stats.staff_workload)\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 5)\n        .map(([name, count], i) => ({\n          name: name.length > 10 ? name.slice(0, 8) + '…' : name,\n          fullName: name,\n          tasks: count,\n          fill: PIE_COLORS[i % PIE_COLORS.length],\n        }))\n    : [];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-8\" dir=\"rtl\">\n      <div className=\"flex justify-between items-end mb-10\">\n        <div>\n          <h1 className=\"text-3xl font-black text-gray-900 dark:text-white\">בוקר טוב, מנהל</h1>\n          <p className=\"text-gray-500 dark:text-gray-400\">כל הנכסים שלך תחת שליטה. הנה מה שקורה היום.</p>\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => setShowPropertyModal(true)}\n          className=\"bg-black dark:bg-white text-white dark:text-gray-900 px-6 py-3 rounded-2xl font-bold hover:opacity-90 transition-all\"\n        >\n          + הוסף נכס חדש\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\">\n        <KPICard\n          title=\"הכנסות החודש\"\n          value={summary?.revenue ?? '₪0'}\n          icon={DollarSign}\n          color=\"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400\"\n        />\n        <KPICard\n          title=\"נכסים\"\n          value={String(stats?.total_properties ?? 0)}\n          icon={Home}\n          color=\"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\"\n        />\n        <KPICard\n          title=\"קיבולת כוללת\"\n          value={String(stats?.total_capacity ?? 0)}\n          icon={Users}\n          color=\"bg-violet-50 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400\"\n        />\n        <KPICard\n          title=\"משימות פעילות\"\n          value={String(stats?.tasks_by_status?.Pending ?? 0)}\n          icon={Activity}\n          color=\"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400\"\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2 space-y-8\">\n          <AirbnbImporter onSuccess={() => setImportSuccess((n) => n + 1)} />\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-gray-800/60 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm p-6 min-h-[280px]\">\n              <h3 className=\"text-lg font-bold text-gray-100 dark:text-white mb-4\">משימות לפי סטטוס</h3>\n              {tasksByStatusData.some((d) => d.value > 0) ? (\n                <ResponsiveContainer width=\"100%\" height={200}>\n                  <BarChart data={tasksByStatusData} layout=\"vertical\" margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                    <XAxis type=\"number\" stroke=\"#6b7280\" />\n                    <YAxis type=\"category\" dataKey=\"name\" width={70} stroke=\"#6b7280\" />\n                    <Tooltip\n                      contentStyle={{ backgroundColor: 'rgba(255,255,255,0.95)', border: '1px solid #e5e7eb', borderRadius: 8 }}\n                      formatter={(value) => [value, 'משימות']}\n                    />\n                    <Bar dataKey=\"value\" name=\"משימות\" radius={[0, 4, 4, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\">אין משימות</div>\n              )}\n            </div>\n            <div className=\"bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 min-h-[280px]\">\n              <h3 className=\"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4\">עומס עובדים</h3>\n              {staffWorkloadData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height={200}>\n                  <PieChart>\n                    <Pie\n                      data={staffWorkloadData}\n                      dataKey=\"tasks\"\n                      nameKey=\"fullName\"\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      outerRadius={70}\n                      label={({ fullName, tasks: t }) => `${fullName}: ${t}`}\n                    >\n                      {staffWorkloadData.map((entry, i) => (\n                        <Cell key={i} fill={entry.fill} />\n                      ))}\n                    </Pie>\n                    <Tooltip formatter={(v, n, props) => [`${props.payload.fullName}: ${v} משימות`, '']} />\n                    <Legend />\n                  </PieChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\">אין נתונים</div>\n              )}\n            </div>\n          </div>\n          <StaffGrid />\n        </div>\n        <div className=\"space-y-8\">\n          <TaskListErrorBoundary>\n            <TaskTimeline tasks={tasks ?? []} loading={loading} onToggleStatus={handleToggleStatus} />\n          </TaskListErrorBoundary>\n          <QuickActionStaff topStaff={stats?.top_staff} />\n          <GuestChatFeed />\n        </div>\n      </div>\n\n      <PropertyCreatorModal\n        isOpen={showPropertyModal}\n        onClose={() => setShowPropertyModal(false)}\n        onSuccess={() => setImportSuccess((n) => n + 1)}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}