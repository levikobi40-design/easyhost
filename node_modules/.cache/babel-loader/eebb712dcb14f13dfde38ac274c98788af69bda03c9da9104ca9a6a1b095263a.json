{"ast":null,"code":"/**\n * WhatsApp Integration Service\n * Uses Twilio or Meta Cloud API for sending messages\n */\n\nimport { API_BASE_URL } from '../utils/constants';\nclass WhatsAppService {\n  constructor() {\n    // In production, these would be securely stored\n    this.twilioAccountSid = process.env.REACT_APP_TWILIO_ACCOUNT_SID;\n    this.twilioAuthToken = process.env.REACT_APP_TWILIO_AUTH_TOKEN;\n    this.twilioPhoneNumber = process.env.REACT_APP_TWILIO_PHONE_NUMBER;\n    this.metaAccessToken = process.env.REACT_APP_META_ACCESS_TOKEN;\n    this.metaPhoneNumberId = process.env.REACT_APP_META_PHONE_NUMBER_ID;\n\n    // Message templates for common operations\n    this.templates = {\n      towelRequest: {\n        he: room => `ðŸ¨ *×‘×§×©×” ×—×“×©×”*\\n\\n×ž×’×‘×•×ª × ×“×¨×©×•×ª ×‘×—×“×¨ *${room}*\\n\\nâ° ×× × ×˜×¤×œ ×‘×”×§×“×`,\n        en: room => `ðŸ¨ *New Request*\\n\\nTowels needed in room *${room}*\\n\\nâ° Please handle ASAP`\n      },\n      cleaningRequest: {\n        he: room => `ðŸ§¹ *×‘×§×©×ª × ×™×§×™×•×Ÿ*\\n\\n× ×™×§×™×•×Ÿ × ×“×¨×© ×‘×—×“×¨ *${room}*\\n\\nâ° ×× × ×ª×× ×¢× ×”×¦×•×•×ª`,\n        en: room => `ðŸ§¹ *Cleaning Request*\\n\\nCleaning needed in room *${room}*\\n\\nâ° Please coordinate with team`\n      },\n      maintenanceRequest: {\n        he: (room, issue) => `ðŸ”§ *×ª×—×–×•×§×”*\\n\\n×‘×¢×™×” ×‘×—×“×¨ *${room}*:\\n${issue}\\n\\nâš ï¸ ×“×—×™×¤×•×ª ×’×‘×•×”×”`,\n        en: (room, issue) => `ðŸ”§ *Maintenance*\\n\\nIssue in room *${room}*:\\n${issue}\\n\\nâš ï¸ High priority`\n      },\n      checkout: {\n        he: (room, guest) => `âœ… *×¦'×§-×××•×˜*\\n\\n×—×“×¨ *${room}* ×”×ª×¤× ×”\\n××•×¨×—: ${guest}\\n\\nðŸ§¹ × × ×œ×”×ª×—×™×œ ×‘× ×™×§×™×•×Ÿ`,\n        en: (room, guest) => `âœ… *Checkout*\\n\\nRoom *${room}* is now available\\nGuest: ${guest}\\n\\nðŸ§¹ Please begin cleaning`\n      },\n      taskAssignment: {\n        he: (task, room, deadline) => `ðŸ“‹ *×ž×©×™×ž×” ×—×“×©×”*\\n\\n${task}\\n×—×“×¨: *${room}*\\n×–×ž×Ÿ ×¡×™×•×: ${deadline}`,\n        en: (task, room, deadline) => `ðŸ“‹ *New Task*\\n\\n${task}\\nRoom: *${room}*\\nDeadline: ${deadline}`\n      },\n      urgentAlert: {\n        he: message => `ðŸš¨ *×”×ª×¨××” ×“×—×•×¤×”*\\n\\n${message}\\n\\nâš¡ × ×“×¨×©×ª ×¤×¢×•×œ×” ×ž×™×™×“×™×ª`,\n        en: message => `ðŸš¨ *Urgent Alert*\\n\\n${message}\\n\\nâš¡ Immediate action required`\n      }\n    };\n\n    // Staff contact list (in production, fetch from database)\n    this.staffContacts = [{\n      id: 1,\n      name: '×™×•×¡×™ - ×ž×©×§ ×‘×™×ª',\n      phone: '+972501234567',\n      department: 'housekeeping'\n    }, {\n      id: 2,\n      name: '×“× ×” - ×ª×—×–×•×§×”',\n      phone: '+972509876543',\n      department: 'maintenance'\n    }, {\n      id: 3,\n      name: '××‘×™ - ×§×‘×œ×”',\n      phone: '+972505555555',\n      department: 'reception'\n    }, {\n      id: 4,\n      name: '×ž×™×›×œ - ×©×™×¨×•×ª ×—×“×¨×™×',\n      phone: '+972503333333',\n      department: 'room_service'\n    }];\n  }\n\n  /**\n   * Send WhatsApp message via Twilio\n   */\n  async sendViaTwilio(to, message) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          to,\n          message,\n          provider: 'twilio'\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to send WhatsApp message');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Twilio send error:', error);\n      // Fallback to simulation for demo\n      return this.simulateSend(to, message);\n    }\n  }\n\n  /**\n   * Send WhatsApp message via Meta Cloud API\n   */\n  async sendViaMeta(to, message, templateName = null) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          to,\n          message,\n          templateName,\n          provider: 'meta'\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to send WhatsApp message');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Meta send error:', error);\n      // Fallback to simulation for demo\n      return this.simulateSend(to, message);\n    }\n  }\n\n  /**\n   * Simulate message sending for demo purposes\n   */\n  simulateSend(to, message) {\n    console.log(`[WhatsApp Simulation] Sending to ${to}:`, message);\n    return {\n      success: true,\n      messageId: `sim_${Date.now()}`,\n      to,\n      message,\n      timestamp: new Date().toISOString(),\n      status: 'delivered'\n    };\n  }\n\n  /**\n   * Send message to department\n   */\n  async sendToDepartment(department, message, lang = 'he') {\n    const staffMembers = this.staffContacts.filter(s => s.department === department);\n    if (staffMembers.length === 0) {\n      console.warn(`[WhatsApp] No staff found for department: ${department}`);\n      return [];\n    }\n    const results = await Promise.all(staffMembers.map(staff => this.sendViaTwilio(staff.phone, message)));\n    return results;\n  }\n\n  /**\n   * Send towel request notification\n   */\n  async notifyTowelRequest(room, lang = 'he') {\n    const message = this.templates.towelRequest[lang](room);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send cleaning request notification\n   */\n  async notifyCleaningRequest(room, lang = 'he') {\n    const message = this.templates.cleaningRequest[lang](room);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send maintenance request notification\n   */\n  async notifyMaintenanceRequest(room, issue, lang = 'he') {\n    const message = this.templates.maintenanceRequest[lang](room, issue);\n    return this.sendToDepartment('maintenance', message, lang);\n  }\n\n  /**\n   * Send checkout notification\n   */\n  async notifyCheckout(room, guestName, lang = 'he') {\n    const message = this.templates.checkout[lang](room, guestName);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send task assignment\n   */\n  async assignTask(staffId, task, room, deadline, lang = 'he') {\n    const staff = this.staffContacts.find(s => s.id === staffId);\n    if (!staff) {\n      throw new Error(`Staff member not found: ${staffId}`);\n    }\n    const message = this.templates.taskAssignment[lang](task, room, deadline);\n    return this.sendViaTwilio(staff.phone, message);\n  }\n\n  /**\n   * Send urgent alert to all staff\n   */\n  async sendUrgentAlert(alertMessage, lang = 'he') {\n    const message = this.templates.urgentAlert[lang](alertMessage);\n    const results = await Promise.all(this.staffContacts.map(staff => this.sendViaTwilio(staff.phone, message)));\n    return results;\n  }\n\n  /**\n   * Get message delivery status\n   */\n  async getMessageStatus(messageId) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/status/${messageId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to get message status');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Status check error:', error);\n      return {\n        status: 'unknown',\n        messageId\n      };\n    }\n  }\n\n  /**\n   * Set up webhook for incoming messages\n   */\n  async setupWebhook(callbackUrl) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/webhook/setup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          callbackUrl\n        })\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Webhook setup error:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Process incoming webhook message\n   */\n  processIncomingMessage(webhookData) {\n    // Parse incoming WhatsApp message\n    const {\n      from,\n      body,\n      timestamp,\n      type\n    } = webhookData;\n    return {\n      from,\n      message: body,\n      timestamp: new Date(timestamp).toISOString(),\n      type,\n      processed: true\n    };\n  }\n}\n\n// Singleton instance\nexport const whatsappService = new WhatsAppService();\nexport default whatsappService;","map":{"version":3,"names":["API_BASE_URL","WhatsAppService","constructor","twilioAccountSid","process","env","REACT_APP_TWILIO_ACCOUNT_SID","twilioAuthToken","REACT_APP_TWILIO_AUTH_TOKEN","twilioPhoneNumber","REACT_APP_TWILIO_PHONE_NUMBER","metaAccessToken","REACT_APP_META_ACCESS_TOKEN","metaPhoneNumberId","REACT_APP_META_PHONE_NUMBER_ID","templates","towelRequest","he","room","en","cleaningRequest","maintenanceRequest","issue","checkout","guest","taskAssignment","task","deadline","urgentAlert","message","staffContacts","id","name","phone","department","sendViaTwilio","to","response","fetch","method","headers","body","JSON","stringify","provider","ok","Error","json","error","console","simulateSend","sendViaMeta","templateName","log","success","messageId","Date","now","timestamp","toISOString","status","sendToDepartment","lang","staffMembers","filter","s","length","warn","results","Promise","all","map","staff","notifyTowelRequest","notifyCleaningRequest","notifyMaintenanceRequest","notifyCheckout","guestName","assignTask","staffId","find","sendUrgentAlert","alertMessage","getMessageStatus","setupWebhook","callbackUrl","processIncomingMessage","webhookData","from","type","processed","whatsappService"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/services/whatsapp.js"],"sourcesContent":["/**\n * WhatsApp Integration Service\n * Uses Twilio or Meta Cloud API for sending messages\n */\n\nimport { API_BASE_URL } from '../utils/constants';\n\nclass WhatsAppService {\n  constructor() {\n    // In production, these would be securely stored\n    this.twilioAccountSid = process.env.REACT_APP_TWILIO_ACCOUNT_SID;\n    this.twilioAuthToken = process.env.REACT_APP_TWILIO_AUTH_TOKEN;\n    this.twilioPhoneNumber = process.env.REACT_APP_TWILIO_PHONE_NUMBER;\n    this.metaAccessToken = process.env.REACT_APP_META_ACCESS_TOKEN;\n    this.metaPhoneNumberId = process.env.REACT_APP_META_PHONE_NUMBER_ID;\n    \n    // Message templates for common operations\n    this.templates = {\n      towelRequest: {\n        he: (room) => `ðŸ¨ *×‘×§×©×” ×—×“×©×”*\\n\\n×ž×’×‘×•×ª × ×“×¨×©×•×ª ×‘×—×“×¨ *${room}*\\n\\nâ° ×× × ×˜×¤×œ ×‘×”×§×“×`,\n        en: (room) => `ðŸ¨ *New Request*\\n\\nTowels needed in room *${room}*\\n\\nâ° Please handle ASAP`,\n      },\n      cleaningRequest: {\n        he: (room) => `ðŸ§¹ *×‘×§×©×ª × ×™×§×™×•×Ÿ*\\n\\n× ×™×§×™×•×Ÿ × ×“×¨×© ×‘×—×“×¨ *${room}*\\n\\nâ° ×× × ×ª×× ×¢× ×”×¦×•×•×ª`,\n        en: (room) => `ðŸ§¹ *Cleaning Request*\\n\\nCleaning needed in room *${room}*\\n\\nâ° Please coordinate with team`,\n      },\n      maintenanceRequest: {\n        he: (room, issue) => `ðŸ”§ *×ª×—×–×•×§×”*\\n\\n×‘×¢×™×” ×‘×—×“×¨ *${room}*:\\n${issue}\\n\\nâš ï¸ ×“×—×™×¤×•×ª ×’×‘×•×”×”`,\n        en: (room, issue) => `ðŸ”§ *Maintenance*\\n\\nIssue in room *${room}*:\\n${issue}\\n\\nâš ï¸ High priority`,\n      },\n      checkout: {\n        he: (room, guest) => `âœ… *×¦'×§-×××•×˜*\\n\\n×—×“×¨ *${room}* ×”×ª×¤× ×”\\n××•×¨×—: ${guest}\\n\\nðŸ§¹ × × ×œ×”×ª×—×™×œ ×‘× ×™×§×™×•×Ÿ`,\n        en: (room, guest) => `âœ… *Checkout*\\n\\nRoom *${room}* is now available\\nGuest: ${guest}\\n\\nðŸ§¹ Please begin cleaning`,\n      },\n      taskAssignment: {\n        he: (task, room, deadline) => `ðŸ“‹ *×ž×©×™×ž×” ×—×“×©×”*\\n\\n${task}\\n×—×“×¨: *${room}*\\n×–×ž×Ÿ ×¡×™×•×: ${deadline}`,\n        en: (task, room, deadline) => `ðŸ“‹ *New Task*\\n\\n${task}\\nRoom: *${room}*\\nDeadline: ${deadline}`,\n      },\n      urgentAlert: {\n        he: (message) => `ðŸš¨ *×”×ª×¨××” ×“×—×•×¤×”*\\n\\n${message}\\n\\nâš¡ × ×“×¨×©×ª ×¤×¢×•×œ×” ×ž×™×™×“×™×ª`,\n        en: (message) => `ðŸš¨ *Urgent Alert*\\n\\n${message}\\n\\nâš¡ Immediate action required`,\n      },\n    };\n\n    // Staff contact list (in production, fetch from database)\n    this.staffContacts = [\n      { id: 1, name: '×™×•×¡×™ - ×ž×©×§ ×‘×™×ª', phone: '+972501234567', department: 'housekeeping' },\n      { id: 2, name: '×“× ×” - ×ª×—×–×•×§×”', phone: '+972509876543', department: 'maintenance' },\n      { id: 3, name: '××‘×™ - ×§×‘×œ×”', phone: '+972505555555', department: 'reception' },\n      { id: 4, name: '×ž×™×›×œ - ×©×™×¨×•×ª ×—×“×¨×™×', phone: '+972503333333', department: 'room_service' },\n    ];\n  }\n\n  /**\n   * Send WhatsApp message via Twilio\n   */\n  async sendViaTwilio(to, message) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          to,\n          message,\n          provider: 'twilio',\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to send WhatsApp message');\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Twilio send error:', error);\n      // Fallback to simulation for demo\n      return this.simulateSend(to, message);\n    }\n  }\n\n  /**\n   * Send WhatsApp message via Meta Cloud API\n   */\n  async sendViaMeta(to, message, templateName = null) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          to,\n          message,\n          templateName,\n          provider: 'meta',\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to send WhatsApp message');\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Meta send error:', error);\n      // Fallback to simulation for demo\n      return this.simulateSend(to, message);\n    }\n  }\n\n  /**\n   * Simulate message sending for demo purposes\n   */\n  simulateSend(to, message) {\n    console.log(`[WhatsApp Simulation] Sending to ${to}:`, message);\n    \n    return {\n      success: true,\n      messageId: `sim_${Date.now()}`,\n      to,\n      message,\n      timestamp: new Date().toISOString(),\n      status: 'delivered',\n    };\n  }\n\n  /**\n   * Send message to department\n   */\n  async sendToDepartment(department, message, lang = 'he') {\n    const staffMembers = this.staffContacts.filter((s) => s.department === department);\n    \n    if (staffMembers.length === 0) {\n      console.warn(`[WhatsApp] No staff found for department: ${department}`);\n      return [];\n    }\n\n    const results = await Promise.all(\n      staffMembers.map((staff) => this.sendViaTwilio(staff.phone, message))\n    );\n\n    return results;\n  }\n\n  /**\n   * Send towel request notification\n   */\n  async notifyTowelRequest(room, lang = 'he') {\n    const message = this.templates.towelRequest[lang](room);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send cleaning request notification\n   */\n  async notifyCleaningRequest(room, lang = 'he') {\n    const message = this.templates.cleaningRequest[lang](room);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send maintenance request notification\n   */\n  async notifyMaintenanceRequest(room, issue, lang = 'he') {\n    const message = this.templates.maintenanceRequest[lang](room, issue);\n    return this.sendToDepartment('maintenance', message, lang);\n  }\n\n  /**\n   * Send checkout notification\n   */\n  async notifyCheckout(room, guestName, lang = 'he') {\n    const message = this.templates.checkout[lang](room, guestName);\n    return this.sendToDepartment('housekeeping', message, lang);\n  }\n\n  /**\n   * Send task assignment\n   */\n  async assignTask(staffId, task, room, deadline, lang = 'he') {\n    const staff = this.staffContacts.find((s) => s.id === staffId);\n    if (!staff) {\n      throw new Error(`Staff member not found: ${staffId}`);\n    }\n\n    const message = this.templates.taskAssignment[lang](task, room, deadline);\n    return this.sendViaTwilio(staff.phone, message);\n  }\n\n  /**\n   * Send urgent alert to all staff\n   */\n  async sendUrgentAlert(alertMessage, lang = 'he') {\n    const message = this.templates.urgentAlert[lang](alertMessage);\n    \n    const results = await Promise.all(\n      this.staffContacts.map((staff) => this.sendViaTwilio(staff.phone, message))\n    );\n\n    return results;\n  }\n\n  /**\n   * Get message delivery status\n   */\n  async getMessageStatus(messageId) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/status/${messageId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to get message status');\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Status check error:', error);\n      return { status: 'unknown', messageId };\n    }\n  }\n\n  /**\n   * Set up webhook for incoming messages\n   */\n  async setupWebhook(callbackUrl) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/whatsapp/webhook/setup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ callbackUrl }),\n      });\n\n      return await response.json();\n    } catch (error) {\n      console.error('[WhatsApp] Webhook setup error:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Process incoming webhook message\n   */\n  processIncomingMessage(webhookData) {\n    // Parse incoming WhatsApp message\n    const { from, body, timestamp, type } = webhookData;\n\n    return {\n      from,\n      message: body,\n      timestamp: new Date(timestamp).toISOString(),\n      type,\n      processed: true,\n    };\n  }\n}\n\n// Singleton instance\nexport const whatsappService = new WhatsAppService();\n\nexport default whatsappService;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,SAASA,YAAY,QAAQ,oBAAoB;AAEjD,MAAMC,eAAe,CAAC;EACpBC,WAAWA,CAAA,EAAG;IACZ;IACA,IAAI,CAACC,gBAAgB,GAAGC,OAAO,CAACC,GAAG,CAACC,4BAA4B;IAChE,IAAI,CAACC,eAAe,GAAGH,OAAO,CAACC,GAAG,CAACG,2BAA2B;IAC9D,IAAI,CAACC,iBAAiB,GAAGL,OAAO,CAACC,GAAG,CAACK,6BAA6B;IAClE,IAAI,CAACC,eAAe,GAAGP,OAAO,CAACC,GAAG,CAACO,2BAA2B;IAC9D,IAAI,CAACC,iBAAiB,GAAGT,OAAO,CAACC,GAAG,CAACS,8BAA8B;;IAEnE;IACA,IAAI,CAACC,SAAS,GAAG;MACfC,YAAY,EAAE;QACZC,EAAE,EAAGC,IAAI,IAAK,wCAAwCA,IAAI,sBAAsB;QAChFC,EAAE,EAAGD,IAAI,IAAK,8CAA8CA,IAAI;MAClE,CAAC;MACDE,eAAe,EAAE;QACfH,EAAE,EAAGC,IAAI,IAAK,yCAAyCA,IAAI,yBAAyB;QACpFC,EAAE,EAAGD,IAAI,IAAK,qDAAqDA,IAAI;MACzE,CAAC;MACDG,kBAAkB,EAAE;QAClBJ,EAAE,EAAEA,CAACC,IAAI,EAAEI,KAAK,KAAK,6BAA6BJ,IAAI,OAAOI,KAAK,qBAAqB;QACvFH,EAAE,EAAEA,CAACD,IAAI,EAAEI,KAAK,KAAK,sCAAsCJ,IAAI,OAAOI,KAAK;MAC7E,CAAC;MACDC,QAAQ,EAAE;QACRN,EAAE,EAAEA,CAACC,IAAI,EAAEM,KAAK,KAAK,wBAAwBN,IAAI,kBAAkBM,KAAK,0BAA0B;QAClGL,EAAE,EAAEA,CAACD,IAAI,EAAEM,KAAK,KAAK,yBAAyBN,IAAI,8BAA8BM,KAAK;MACvF,CAAC;MACDC,cAAc,EAAE;QACdR,EAAE,EAAEA,CAACS,IAAI,EAAER,IAAI,EAAES,QAAQ,KAAK,sBAAsBD,IAAI,WAAWR,IAAI,gBAAgBS,QAAQ,EAAE;QACjGR,EAAE,EAAEA,CAACO,IAAI,EAAER,IAAI,EAAES,QAAQ,KAAK,oBAAoBD,IAAI,YAAYR,IAAI,gBAAgBS,QAAQ;MAChG,CAAC;MACDC,WAAW,EAAE;QACXX,EAAE,EAAGY,OAAO,IAAK,uBAAuBA,OAAO,0BAA0B;QACzEV,EAAE,EAAGU,OAAO,IAAK,wBAAwBA,OAAO;MAClD;IACF,CAAC;;IAED;IACA,IAAI,CAACC,aAAa,GAAG,CACnB;MAAEC,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,gBAAgB;MAAEC,KAAK,EAAE,eAAe;MAAEC,UAAU,EAAE;IAAe,CAAC,EACrF;MAAEH,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,cAAc;MAAEC,KAAK,EAAE,eAAe;MAAEC,UAAU,EAAE;IAAc,CAAC,EAClF;MAAEH,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,YAAY;MAAEC,KAAK,EAAE,eAAe;MAAEC,UAAU,EAAE;IAAY,CAAC,EAC9E;MAAEH,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,oBAAoB;MAAEC,KAAK,EAAE,eAAe;MAAEC,UAAU,EAAE;IAAe,CAAC,CAC1F;EACH;;EAEA;AACF;AACA;EACE,MAAMC,aAAaA,CAACC,EAAE,EAAEP,OAAO,EAAE;IAC/B,IAAI;MACF,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGtC,YAAY,oBAAoB,EAAE;QAChEuC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBP,EAAE;UACFP,OAAO;UACPe,QAAQ,EAAE;QACZ,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;MACpD;MAEA,OAAO,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrD;MACA,OAAO,IAAI,CAACE,YAAY,CAACd,EAAE,EAAEP,OAAO,CAAC;IACvC;EACF;;EAEA;AACF;AACA;EACE,MAAMsB,WAAWA,CAACf,EAAE,EAAEP,OAAO,EAAEuB,YAAY,GAAG,IAAI,EAAE;IAClD,IAAI;MACF,MAAMf,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGtC,YAAY,oBAAoB,EAAE;QAChEuC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBP,EAAE;UACFP,OAAO;UACPuB,YAAY;UACZR,QAAQ,EAAE;QACZ,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;MACpD;MAEA,OAAO,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD;MACA,OAAO,IAAI,CAACE,YAAY,CAACd,EAAE,EAAEP,OAAO,CAAC;IACvC;EACF;;EAEA;AACF;AACA;EACEqB,YAAYA,CAACd,EAAE,EAAEP,OAAO,EAAE;IACxBoB,OAAO,CAACI,GAAG,CAAC,oCAAoCjB,EAAE,GAAG,EAAEP,OAAO,CAAC;IAE/D,OAAO;MACLyB,OAAO,EAAE,IAAI;MACbC,SAAS,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC9BrB,EAAE;MACFP,OAAO;MACP6B,SAAS,EAAE,IAAIF,IAAI,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC;MACnCC,MAAM,EAAE;IACV,CAAC;EACH;;EAEA;AACF;AACA;EACE,MAAMC,gBAAgBA,CAAC3B,UAAU,EAAEL,OAAO,EAAEiC,IAAI,GAAG,IAAI,EAAE;IACvD,MAAMC,YAAY,GAAG,IAAI,CAACjC,aAAa,CAACkC,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC/B,UAAU,KAAKA,UAAU,CAAC;IAElF,IAAI6B,YAAY,CAACG,MAAM,KAAK,CAAC,EAAE;MAC7BjB,OAAO,CAACkB,IAAI,CAAC,6CAA6CjC,UAAU,EAAE,CAAC;MACvE,OAAO,EAAE;IACX;IAEA,MAAMkC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC/BP,YAAY,CAACQ,GAAG,CAAEC,KAAK,IAAK,IAAI,CAACrC,aAAa,CAACqC,KAAK,CAACvC,KAAK,EAAEJ,OAAO,CAAC,CACtE,CAAC;IAED,OAAOuC,OAAO;EAChB;;EAEA;AACF;AACA;EACE,MAAMK,kBAAkBA,CAACvD,IAAI,EAAE4C,IAAI,GAAG,IAAI,EAAE;IAC1C,MAAMjC,OAAO,GAAG,IAAI,CAACd,SAAS,CAACC,YAAY,CAAC8C,IAAI,CAAC,CAAC5C,IAAI,CAAC;IACvD,OAAO,IAAI,CAAC2C,gBAAgB,CAAC,cAAc,EAAEhC,OAAO,EAAEiC,IAAI,CAAC;EAC7D;;EAEA;AACF;AACA;EACE,MAAMY,qBAAqBA,CAACxD,IAAI,EAAE4C,IAAI,GAAG,IAAI,EAAE;IAC7C,MAAMjC,OAAO,GAAG,IAAI,CAACd,SAAS,CAACK,eAAe,CAAC0C,IAAI,CAAC,CAAC5C,IAAI,CAAC;IAC1D,OAAO,IAAI,CAAC2C,gBAAgB,CAAC,cAAc,EAAEhC,OAAO,EAAEiC,IAAI,CAAC;EAC7D;;EAEA;AACF;AACA;EACE,MAAMa,wBAAwBA,CAACzD,IAAI,EAAEI,KAAK,EAAEwC,IAAI,GAAG,IAAI,EAAE;IACvD,MAAMjC,OAAO,GAAG,IAAI,CAACd,SAAS,CAACM,kBAAkB,CAACyC,IAAI,CAAC,CAAC5C,IAAI,EAAEI,KAAK,CAAC;IACpE,OAAO,IAAI,CAACuC,gBAAgB,CAAC,aAAa,EAAEhC,OAAO,EAAEiC,IAAI,CAAC;EAC5D;;EAEA;AACF;AACA;EACE,MAAMc,cAAcA,CAAC1D,IAAI,EAAE2D,SAAS,EAAEf,IAAI,GAAG,IAAI,EAAE;IACjD,MAAMjC,OAAO,GAAG,IAAI,CAACd,SAAS,CAACQ,QAAQ,CAACuC,IAAI,CAAC,CAAC5C,IAAI,EAAE2D,SAAS,CAAC;IAC9D,OAAO,IAAI,CAAChB,gBAAgB,CAAC,cAAc,EAAEhC,OAAO,EAAEiC,IAAI,CAAC;EAC7D;;EAEA;AACF;AACA;EACE,MAAMgB,UAAUA,CAACC,OAAO,EAAErD,IAAI,EAAER,IAAI,EAAES,QAAQ,EAAEmC,IAAI,GAAG,IAAI,EAAE;IAC3D,MAAMU,KAAK,GAAG,IAAI,CAAC1C,aAAa,CAACkD,IAAI,CAAEf,CAAC,IAAKA,CAAC,CAAClC,EAAE,KAAKgD,OAAO,CAAC;IAC9D,IAAI,CAACP,KAAK,EAAE;MACV,MAAM,IAAI1B,KAAK,CAAC,2BAA2BiC,OAAO,EAAE,CAAC;IACvD;IAEA,MAAMlD,OAAO,GAAG,IAAI,CAACd,SAAS,CAACU,cAAc,CAACqC,IAAI,CAAC,CAACpC,IAAI,EAAER,IAAI,EAAES,QAAQ,CAAC;IACzE,OAAO,IAAI,CAACQ,aAAa,CAACqC,KAAK,CAACvC,KAAK,EAAEJ,OAAO,CAAC;EACjD;;EAEA;AACF;AACA;EACE,MAAMoD,eAAeA,CAACC,YAAY,EAAEpB,IAAI,GAAG,IAAI,EAAE;IAC/C,MAAMjC,OAAO,GAAG,IAAI,CAACd,SAAS,CAACa,WAAW,CAACkC,IAAI,CAAC,CAACoB,YAAY,CAAC;IAE9D,MAAMd,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC/B,IAAI,CAACxC,aAAa,CAACyC,GAAG,CAAEC,KAAK,IAAK,IAAI,CAACrC,aAAa,CAACqC,KAAK,CAACvC,KAAK,EAAEJ,OAAO,CAAC,CAC5E,CAAC;IAED,OAAOuC,OAAO;EAChB;;EAEA;AACF;AACA;EACE,MAAMe,gBAAgBA,CAAC5B,SAAS,EAAE;IAChC,IAAI;MACF,MAAMlB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGtC,YAAY,wBAAwBuD,SAAS,EAAE,EAAE;QAC/EhB,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MAEF,IAAI,CAACH,QAAQ,CAACQ,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;MACjD;MAEA,OAAO,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD,OAAO;QAAEY,MAAM,EAAE,SAAS;QAAEL;MAAU,CAAC;IACzC;EACF;;EAEA;AACF;AACA;EACE,MAAM6B,YAAYA,CAACC,WAAW,EAAE;IAC9B,IAAI;MACF,MAAMhD,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGtC,YAAY,6BAA6B,EAAE;QACzEuC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAE0C;QAAY,CAAC;MACtC,CAAC,CAAC;MAEF,OAAO,MAAMhD,QAAQ,CAACU,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,MAAMA,KAAK;IACb;EACF;;EAEA;AACF;AACA;EACEsC,sBAAsBA,CAACC,WAAW,EAAE;IAClC;IACA,MAAM;MAAEC,IAAI;MAAE/C,IAAI;MAAEiB,SAAS;MAAE+B;IAAK,CAAC,GAAGF,WAAW;IAEnD,OAAO;MACLC,IAAI;MACJ3D,OAAO,EAAEY,IAAI;MACbiB,SAAS,EAAE,IAAIF,IAAI,CAACE,SAAS,CAAC,CAACC,WAAW,CAAC,CAAC;MAC5C8B,IAAI;MACJC,SAAS,EAAE;IACb,CAAC;EACH;AACF;;AAEA;AACA,OAAO,MAAMC,eAAe,GAAG,IAAI1F,eAAe,CAAC,CAAC;AAEpD,eAAe0F,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}