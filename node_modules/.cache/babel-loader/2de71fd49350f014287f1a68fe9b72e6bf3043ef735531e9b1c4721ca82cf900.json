{"ast":null,"code":"/**\n * Central API client - uses current host for cross-device access (e.g. phone on same network).\n * When you visit http://192.168.1.100:3000 from your phone, API calls go to 192.168.1.100:5000.\n * Override with REACT_APP_API_URL in .env if needed.\n */\nconst getApiBase = () => {\n  var _process$env;\n  if (typeof process !== 'undefined' && (_process$env = process.env) !== null && _process$env !== void 0 && _process$env.REACT_APP_API_URL) {\n    return process.env.REACT_APP_API_URL.replace(/\\/$/, '');\n  }\n  const host = typeof window !== 'undefined' ? window.location.hostname : '127.0.0.1';\n  return `http://${host}:5000`;\n};\nconst API_URL = getApiBase();\nconst API_BASE_URL = API_URL; /* alias for backwards compat */\n\nconst getAuthHeaders = () => {\n  try {\n    var _parsed$state, _parsed$state2;\n    const raw = localStorage.getItem('hotel-enterprise-storage');\n    if (!raw) return {};\n    const parsed = JSON.parse(raw);\n    const token = parsed === null || parsed === void 0 ? void 0 : (_parsed$state = parsed.state) === null || _parsed$state === void 0 ? void 0 : _parsed$state.authToken;\n    const tenantId = parsed === null || parsed === void 0 ? void 0 : (_parsed$state2 = parsed.state) === null || _parsed$state2 === void 0 ? void 0 : _parsed$state2.activeTenantId;\n    const headers = {};\n    if (token) headers.Authorization = `Bearer ${token}`;\n    if (tenantId) headers['X-Tenant-Id'] = tenantId;\n    return headers;\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Central fetch helper - uses API_URL (current host:5000 for cross-device access)\n * On error: logs full error to console and throws with clear message\n */\nexport const apiRequest = async (path, options = {}) => {\n  const url = path.startsWith('http') ? path : `${API_URL}${path}`;\n  const {\n    method = 'GET',\n    body,\n    headers = {},\n    ...rest\n  } = options;\n  const finalHeaders = {\n    'Content-Type': 'application/json',\n    ...getAuthHeaders(),\n    ...headers\n  };\n  if (body && typeof body === 'object' && !(body instanceof FormData)) {\n    try {\n      rest.body = JSON.stringify(body);\n    } catch (e) {\n      rest.body = body;\n    }\n  } else if (body) {\n    rest.body = body;\n    delete finalHeaders['Content-Type'];\n  }\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: finalHeaders,\n      ...rest\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      const err = new Error(data.error || data.message || `HTTP ${response.status}`);\n      err.status = response.status;\n      err.data = data;\n      throw err;\n    }\n    return data;\n  } catch (error) {\n    console.error('[API Error] Full details:', {\n      url,\n      method,\n      message: error === null || error === void 0 ? void 0 : error.message,\n      status: error === null || error === void 0 ? void 0 : error.status,\n      responseData: error === null || error === void 0 ? void 0 : error.data,\n      stack: error === null || error === void 0 ? void 0 : error.stack\n    });\n    throw error;\n  }\n};\nexport const apiGet = path => apiRequest(path, {\n  method: 'GET'\n});\nexport const apiPost = (path, body) => apiRequest(path, {\n  method: 'POST',\n  body\n});\nexport const apiPut = (path, body) => apiRequest(path, {\n  method: 'PUT',\n  body\n});\nexport const apiPatch = (path, body) => apiRequest(path, {\n  method: 'PATCH',\n  body\n});\nexport const apiDelete = path => apiRequest(path, {\n  method: 'DELETE'\n});\nexport const getAPIUrl = () => getApiBase();\nexport { API_URL, API_BASE_URL };\nexport default apiRequest;","map":{"version":3,"names":["getApiBase","_process$env","process","env","REACT_APP_API_URL","replace","host","window","location","hostname","API_URL","API_BASE_URL","getAuthHeaders","_parsed$state","_parsed$state2","raw","localStorage","getItem","parsed","JSON","parse","token","state","authToken","tenantId","activeTenantId","headers","Authorization","apiRequest","path","options","url","startsWith","method","body","rest","finalHeaders","FormData","stringify","e","response","fetch","data","json","catch","ok","err","Error","error","message","status","console","responseData","stack","apiGet","apiPost","apiPut","apiPatch","apiDelete","getAPIUrl"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/utils/apiClient.js"],"sourcesContent":["/**\n * Central API client - uses current host for cross-device access (e.g. phone on same network).\n * When you visit http://192.168.1.100:3000 from your phone, API calls go to 192.168.1.100:5000.\n * Override with REACT_APP_API_URL in .env if needed.\n */\nconst getApiBase = () => {\n  if (typeof process !== 'undefined' && process.env?.REACT_APP_API_URL) {\n    return process.env.REACT_APP_API_URL.replace(/\\/$/, '');\n  }\n  const host = typeof window !== 'undefined' ? window.location.hostname : '127.0.0.1';\n  return `http://${host}:5000`;\n};\nconst API_URL = getApiBase();\nconst API_BASE_URL = API_URL; /* alias for backwards compat */\n\nconst getAuthHeaders = () => {\n  try {\n    const raw = localStorage.getItem('hotel-enterprise-storage');\n    if (!raw) return {};\n    const parsed = JSON.parse(raw);\n    const token = parsed?.state?.authToken;\n    const tenantId = parsed?.state?.activeTenantId;\n    const headers = {};\n    if (token) headers.Authorization = `Bearer ${token}`;\n    if (tenantId) headers['X-Tenant-Id'] = tenantId;\n    return headers;\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Central fetch helper - uses API_URL (current host:5000 for cross-device access)\n * On error: logs full error to console and throws with clear message\n */\nexport const apiRequest = async (path, options = {}) => {\n  const url = path.startsWith('http') ? path : `${API_URL}${path}`;\n  const { method = 'GET', body, headers = {}, ...rest } = options;\n  const finalHeaders = {\n    'Content-Type': 'application/json',\n    ...getAuthHeaders(),\n    ...headers,\n  };\n  if (body && typeof body === 'object' && !(body instanceof FormData)) {\n    try {\n      rest.body = JSON.stringify(body);\n    } catch (e) {\n      rest.body = body;\n    }\n  } else if (body) {\n    rest.body = body;\n    delete finalHeaders['Content-Type'];\n  }\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: finalHeaders,\n      ...rest,\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      const err = new Error(data.error || data.message || `HTTP ${response.status}`);\n      err.status = response.status;\n      err.data = data;\n      throw err;\n    }\n    return data;\n  } catch (error) {\n    console.error('[API Error] Full details:', {\n      url,\n      method,\n      message: error?.message,\n      status: error?.status,\n      responseData: error?.data,\n      stack: error?.stack,\n    });\n    throw error;\n  }\n};\n\nexport const apiGet = (path) => apiRequest(path, { method: 'GET' });\nexport const apiPost = (path, body) => apiRequest(path, { method: 'POST', body });\nexport const apiPut = (path, body) => apiRequest(path, { method: 'PUT', body });\nexport const apiPatch = (path, body) => apiRequest(path, { method: 'PATCH', body });\nexport const apiDelete = (path) => apiRequest(path, { method: 'DELETE' });\n\nexport const getAPIUrl = () => getApiBase();\nexport { API_URL, API_BASE_URL };\nexport default apiRequest;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,MAAMA,UAAU,GAAGA,CAAA,KAAM;EAAA,IAAAC,YAAA;EACvB,IAAI,OAAOC,OAAO,KAAK,WAAW,KAAAD,YAAA,GAAIC,OAAO,CAACC,GAAG,cAAAF,YAAA,eAAXA,YAAA,CAAaG,iBAAiB,EAAE;IACpE,OAAOF,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACzD;EACA,MAAMC,IAAI,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAG,WAAW;EACnF,OAAO,UAAUH,IAAI,OAAO;AAC9B,CAAC;AACD,MAAMI,OAAO,GAAGV,UAAU,CAAC,CAAC;AAC5B,MAAMW,YAAY,GAAGD,OAAO,CAAC,CAAC;;AAE9B,MAAME,cAAc,GAAGA,CAAA,KAAM;EAC3B,IAAI;IAAA,IAAAC,aAAA,EAAAC,cAAA;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,0BAA0B,CAAC;IAC5D,IAAI,CAACF,GAAG,EAAE,OAAO,CAAC,CAAC;IACnB,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC;IAC9B,MAAMM,KAAK,GAAGH,MAAM,aAANA,MAAM,wBAAAL,aAAA,GAANK,MAAM,CAAEI,KAAK,cAAAT,aAAA,uBAAbA,aAAA,CAAeU,SAAS;IACtC,MAAMC,QAAQ,GAAGN,MAAM,aAANA,MAAM,wBAAAJ,cAAA,GAANI,MAAM,CAAEI,KAAK,cAAAR,cAAA,uBAAbA,cAAA,CAAeW,cAAc;IAC9C,MAAMC,OAAO,GAAG,CAAC,CAAC;IAClB,IAAIL,KAAK,EAAEK,OAAO,CAACC,aAAa,GAAG,UAAUN,KAAK,EAAE;IACpD,IAAIG,QAAQ,EAAEE,OAAO,CAAC,aAAa,CAAC,GAAGF,QAAQ;IAC/C,OAAOE,OAAO;EAChB,CAAC,CAAC,MAAM;IACN,OAAO,CAAC,CAAC;EACX;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAME,UAAU,GAAG,MAAAA,CAAOC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACtD,MAAMC,GAAG,GAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,GAAGH,IAAI,GAAG,GAAGnB,OAAO,GAAGmB,IAAI,EAAE;EAChE,MAAM;IAAEI,MAAM,GAAG,KAAK;IAAEC,IAAI;IAAER,OAAO,GAAG,CAAC,CAAC;IAAE,GAAGS;EAAK,CAAC,GAAGL,OAAO;EAC/D,MAAMM,YAAY,GAAG;IACnB,cAAc,EAAE,kBAAkB;IAClC,GAAGxB,cAAc,CAAC,CAAC;IACnB,GAAGc;EACL,CAAC;EACD,IAAIQ,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI,EAAEA,IAAI,YAAYG,QAAQ,CAAC,EAAE;IACnE,IAAI;MACFF,IAAI,CAACD,IAAI,GAAGf,IAAI,CAACmB,SAAS,CAACJ,IAAI,CAAC;IAClC,CAAC,CAAC,OAAOK,CAAC,EAAE;MACVJ,IAAI,CAACD,IAAI,GAAGA,IAAI;IAClB;EACF,CAAC,MAAM,IAAIA,IAAI,EAAE;IACfC,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,OAAOE,YAAY,CAAC,cAAc,CAAC;EACrC;EACA,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACV,GAAG,EAAE;MAChCE,MAAM;MACNP,OAAO,EAAEU,YAAY;MACrB,GAAGD;IACL,CAAC,CAAC;IACF,MAAMO,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACpD,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;MAChB,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAACL,IAAI,CAACM,KAAK,IAAIN,IAAI,CAACO,OAAO,IAAI,QAAQT,QAAQ,CAACU,MAAM,EAAE,CAAC;MAC9EJ,GAAG,CAACI,MAAM,GAAGV,QAAQ,CAACU,MAAM;MAC5BJ,GAAG,CAACJ,IAAI,GAAGA,IAAI;MACf,MAAMI,GAAG;IACX;IACA,OAAOJ,IAAI;EACb,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdG,OAAO,CAACH,KAAK,CAAC,2BAA2B,EAAE;MACzCjB,GAAG;MACHE,MAAM;MACNgB,OAAO,EAAED,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,OAAO;MACvBC,MAAM,EAAEF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEE,MAAM;MACrBE,YAAY,EAAEJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEN,IAAI;MACzBW,KAAK,EAAEL,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK;IAChB,CAAC,CAAC;IACF,MAAML,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMM,MAAM,GAAIzB,IAAI,IAAKD,UAAU,CAACC,IAAI,EAAE;EAAEI,MAAM,EAAE;AAAM,CAAC,CAAC;AACnE,OAAO,MAAMsB,OAAO,GAAGA,CAAC1B,IAAI,EAAEK,IAAI,KAAKN,UAAU,CAACC,IAAI,EAAE;EAAEI,MAAM,EAAE,MAAM;EAAEC;AAAK,CAAC,CAAC;AACjF,OAAO,MAAMsB,MAAM,GAAGA,CAAC3B,IAAI,EAAEK,IAAI,KAAKN,UAAU,CAACC,IAAI,EAAE;EAAEI,MAAM,EAAE,KAAK;EAAEC;AAAK,CAAC,CAAC;AAC/E,OAAO,MAAMuB,QAAQ,GAAGA,CAAC5B,IAAI,EAAEK,IAAI,KAAKN,UAAU,CAACC,IAAI,EAAE;EAAEI,MAAM,EAAE,OAAO;EAAEC;AAAK,CAAC,CAAC;AACnF,OAAO,MAAMwB,SAAS,GAAI7B,IAAI,IAAKD,UAAU,CAACC,IAAI,EAAE;EAAEI,MAAM,EAAE;AAAS,CAAC,CAAC;AAEzE,OAAO,MAAM0B,SAAS,GAAGA,CAAA,KAAM3D,UAAU,CAAC,CAAC;AAC3C,SAASU,OAAO,EAAEC,YAAY;AAC9B,eAAeiB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}