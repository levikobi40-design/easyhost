{"ast":null,"code":"/**\n * Central API client - ALL fetch/axios calls use this URL. No exceptions.\n */const API_URL='http://127.0.0.1:5000';const getAuthHeaders=()=>{try{var _parsed$state,_parsed$state2;const raw=localStorage.getItem('hotel-enterprise-storage');if(!raw)return{};const parsed=JSON.parse(raw);const token=parsed===null||parsed===void 0?void 0:(_parsed$state=parsed.state)===null||_parsed$state===void 0?void 0:_parsed$state.authToken;const tenantId=parsed===null||parsed===void 0?void 0:(_parsed$state2=parsed.state)===null||_parsed$state2===void 0?void 0:_parsed$state2.activeTenantId;const headers={};if(token)headers.Authorization=`Bearer ${token}`;if(tenantId)headers['X-Tenant-Id']=tenantId;return headers;}catch{return{};}};/**\n * Central fetch helper - always uses http://127.0.0.1:5000\n * On error: logs full error to console and throws with clear message\n */export const apiRequest=async function(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=path.startsWith('http')?path:`${API_URL}${path}`;const{method='GET',body,headers={},...rest}=options;const finalHeaders={'Content-Type':'application/json',...getAuthHeaders(),...headers};if(body&&typeof body==='object'&&!(body instanceof FormData)){try{rest.body=JSON.stringify(body);}catch(e){rest.body=body;}}else if(body){rest.body=body;delete finalHeaders['Content-Type'];}try{const response=await fetch(url,{method,headers:finalHeaders,...rest});const data=await response.json().catch(()=>({}));if(!response.ok){const err=new Error(data.error||data.message||`HTTP ${response.status}`);err.status=response.status;err.data=data;throw err;}return data;}catch(error){console.error('[API Error] Full details:',{url,method,message:error===null||error===void 0?void 0:error.message,status:error===null||error===void 0?void 0:error.status,responseData:error===null||error===void 0?void 0:error.data,stack:error===null||error===void 0?void 0:error.stack});throw error;}};export const apiGet=path=>apiRequest(path,{method:'GET'});export const apiPost=(path,body)=>apiRequest(path,{method:'POST',body});export const apiPut=(path,body)=>apiRequest(path,{method:'PUT',body});export const apiPatch=(path,body)=>apiRequest(path,{method:'PATCH',body});export const apiDelete=path=>apiRequest(path,{method:'DELETE'});export{API_URL};export const API_BASE_URL=API_URL;/* alias for backwards compat */export default apiRequest;","map":{"version":3,"names":["API_URL","getAuthHeaders","_parsed$state","_parsed$state2","raw","localStorage","getItem","parsed","JSON","parse","token","state","authToken","tenantId","activeTenantId","headers","Authorization","apiRequest","path","options","arguments","length","undefined","url","startsWith","method","body","rest","finalHeaders","FormData","stringify","e","response","fetch","data","json","catch","ok","err","Error","error","message","status","console","responseData","stack","apiGet","apiPost","apiPut","apiPatch","apiDelete","API_BASE_URL"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/utils/apiClient.js"],"sourcesContent":["/**\n * Central API client - ALL fetch/axios calls use this URL. No exceptions.\n */\nconst API_URL = 'http://127.0.0.1:5000';\n\nconst getAuthHeaders = () => {\n  try {\n    const raw = localStorage.getItem('hotel-enterprise-storage');\n    if (!raw) return {};\n    const parsed = JSON.parse(raw);\n    const token = parsed?.state?.authToken;\n    const tenantId = parsed?.state?.activeTenantId;\n    const headers = {};\n    if (token) headers.Authorization = `Bearer ${token}`;\n    if (tenantId) headers['X-Tenant-Id'] = tenantId;\n    return headers;\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Central fetch helper - always uses http://127.0.0.1:5000\n * On error: logs full error to console and throws with clear message\n */\nexport const apiRequest = async (path, options = {}) => {\n  const url = path.startsWith('http') ? path : `${API_URL}${path}`;\n  const { method = 'GET', body, headers = {}, ...rest } = options;\n  const finalHeaders = {\n    'Content-Type': 'application/json',\n    ...getAuthHeaders(),\n    ...headers,\n  };\n  if (body && typeof body === 'object' && !(body instanceof FormData)) {\n    try {\n      rest.body = JSON.stringify(body);\n    } catch (e) {\n      rest.body = body;\n    }\n  } else if (body) {\n    rest.body = body;\n    delete finalHeaders['Content-Type'];\n  }\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: finalHeaders,\n      ...rest,\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      const err = new Error(data.error || data.message || `HTTP ${response.status}`);\n      err.status = response.status;\n      err.data = data;\n      throw err;\n    }\n    return data;\n  } catch (error) {\n    console.error('[API Error] Full details:', {\n      url,\n      method,\n      message: error?.message,\n      status: error?.status,\n      responseData: error?.data,\n      stack: error?.stack,\n    });\n    throw error;\n  }\n};\n\nexport const apiGet = (path) => apiRequest(path, { method: 'GET' });\nexport const apiPost = (path, body) => apiRequest(path, { method: 'POST', body });\nexport const apiPut = (path, body) => apiRequest(path, { method: 'PUT', body });\nexport const apiPatch = (path, body) => apiRequest(path, { method: 'PATCH', body });\nexport const apiDelete = (path) => apiRequest(path, { method: 'DELETE' });\n\nexport { API_URL };\nexport const API_BASE_URL = API_URL; /* alias for backwards compat */\nexport default apiRequest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}