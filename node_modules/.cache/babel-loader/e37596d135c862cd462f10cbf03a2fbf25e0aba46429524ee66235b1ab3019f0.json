{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\hotel_ai_assistant\\\\hotel_dashboard\\\\src\\\\components\\\\dashboard\\\\PremiumDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { CheckCircle, Clock, DollarSign, Activity, Home, Users, Phone, MessageCircle } from 'lucide-react';\nimport { toWhatsAppPhone } from '../../utils/phone';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell, Legend } from 'recharts';\nimport { getDashboardSummary, getStatsSummary, getPropertyTasks, updatePropertyTaskStatus } from '../../services/api';\nimport StaffGrid from './StaffGrid';\nimport AirbnbImporter from './AirbnbImporter';\nimport GuestChatFeed from '../guest/GuestChatFeed';\nimport PropertyCreatorModal from './PropertyCreatorModal';\nimport TaskListErrorBoundary from '../common/TaskListErrorBoundary';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TASK_CHART_COLORS = ['#3b82f6', '#10b981'];\nconst PIE_COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899'];\nconst TaskTimeline = ({\n  tasks,\n  loading,\n  onToggleStatus = () => {}\n}) => {\n  const mapStatus = s => {\n    if (!s) return 'pending';\n    if (s === 'Done' || s === 'done' || s === 'Completed' || s === 'completed') return 'completed';\n    return 'pending';\n  };\n  const formatTime = dueAt => {\n    if (!dueAt) return '—';\n    try {\n      const d = new Date(dueAt);\n      return d.toLocaleTimeString('he-IL', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return typeof dueAt === 'string' && dueAt.length >= 16 ? dueAt.slice(11, 16) : '—';\n    }\n  };\n  const list = Array.isArray(tasks) ? tasks.slice(0, 12) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl shadow-xl border border-gray-700/50 dark:border-gray-600/50 backdrop-blur-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-100 dark:text-white\",\n        children: \"\\u05E8\\u05E9\\u05D9\\u05DE\\u05EA \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs font-semibold rounded-full border border-emerald-500/30\",\n        children: \"LIVE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-8 text-center text-gray-400 dark:text-gray-500\",\n      children: \"\\u05D8\\u05D5\\u05E2\\u05DF...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this) : list.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-8 text-center text-gray-400 dark:text-gray-500\",\n      children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05DB\\u05E8\\u05D2\\u05E2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: list.map((task, index) => {\n        const status = mapStatus(task.status);\n        const displayName = task.property_name || task.room || 'נכס';\n        const capacity = task.property_context || '';\n        const timeStr = formatTime(task.due_at || task.created_at);\n        const isDone = status === 'completed';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex gap-4 p-4 rounded-2xl bg-gray-800/60 dark:bg-gray-700/40 border border-gray-700/50 dark:border-gray-600/40 hover:border-gray-600/60 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `z-10 w-9 h-9 rounded-xl flex items-center justify-center shrink-0 ${isDone ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30' : 'bg-amber-500/20 text-amber-400 border border-amber-500/30'}`,\n            children: isDone ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(Clock, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-bold text-gray-100 dark:text-white truncate\",\n                  children: displayName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 23\n                }, this), capacity && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-400 dark:text-gray-400 mt-0.5\",\n                  children: capacity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500 dark:text-gray-400 shrink-0\",\n                children: timeStr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 dark:text-gray-400\",\n                children: task.staff_name || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, this), task.staff_phone ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `tel:${String(task.staff_phone).replace(/\\D/g, '')}`,\n                  className: \"text-xs font-medium text-blue-400 hover:text-blue-300 hover:underline inline-flex items-center gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(Phone, {\n                    size: 12\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 27\n                  }, this), task.staff_phone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `https://wa.me/${toWhatsAppPhone(task.staff_phone)}?text=${encodeURIComponent(`Hi ${task.staff_name || ''}, regarding: ${(task.description || task.title || '').slice(0, 80)}. Please handle when possible.`)}`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"text-green-500 hover:text-green-400 inline-flex\",\n                  title: \"WhatsApp\",\n                  children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => onToggleStatus(task.id, isDone ? 'Pending' : 'Done'),\n              className: `mt-3 inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg transition-colors ${isDone ? 'text-amber-400 hover:bg-amber-500/20 border border-amber-500/30' : 'text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/30'}`,\n              children: isDone ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: \"\\u05D7\\u05D6\\u05E8\\u05D4 \\u05DC\\u05DE\\u05DE\\u05EA\\u05D9\\u05DF\"\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 25\n                }, this), \" \\u05E1\\u05DE\\u05DF \\u05DB\\u05D4\\u05D5\\u05E9\\u05DC\\u05DD\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)]\n        }, task.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_c = TaskTimeline;\nconst KPICard = ({\n  title,\n  value,\n  icon: Icon,\n  color\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white dark:bg-gray-800 p-6 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center gap-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-12 h-12 rounded-2xl flex items-center justify-center ${color}`,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      size: 24\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-400 dark:text-gray-400 font-medium\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-2xl font-black text-gray-100 dark:text-white\",\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 135,\n  columnNumber: 3\n}, this);\n_c2 = KPICard;\nconst QuickActionStaff = ({\n  topStaff\n}) => {\n  const callPhone = phone => {\n    if (!phone) return;\n    window.location.href = `tel:${phone.replace(/\\D/g, '')}`;\n  };\n  if (!(topStaff !== null && topStaff !== void 0 && topStaff.length)) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Phone, {\n        size: 20,\n        className: \"text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), \"\\u05E7\\u05E9\\u05E8 \\u05DE\\u05D4\\u05D9\\u05E8\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: topStaff.map((s, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium text-gray-100 dark:text-white\",\n          children: s.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `tel:${(s.phone || '').replace(/\\D/g, '')}`,\n          onClick: e => {\n            e.preventDefault();\n            callPhone(s.phone);\n          },\n          className: \"text-blue-600 dark:text-blue-400 font-medium text-sm hover:underline\",\n          children: s.phone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n};\n_c3 = QuickActionStaff;\nexport default function PremiumDashboard() {\n  _s();\n  var _summary$revenue, _stats$total_properti, _stats$total_capacity, _stats$tasks_by_statu, _stats$tasks_by_statu2;\n  const [summary, setSummary] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [importSuccess, setImportSuccess] = useState(0);\n  const [showPropertyModal, setShowPropertyModal] = useState(false);\n  useEffect(() => {\n    console.log('[PremiumDashboard] load data, importSuccess=', importSuccess);\n    let cancelled = false;\n    setLoading(true);\n    Promise.all([getDashboardSummary(), getStatsSummary(), getPropertyTasks()]).then(([s, st, t]) => {\n      if (cancelled) return;\n      setSummary(s !== null && s !== void 0 ? s : null);\n      setStats(st !== null && st !== void 0 ? st : null);\n      setTasks(Array.isArray(t) ? t : []);\n    }).catch(e => {\n      if (cancelled) return;\n      setSummary({\n        revenue: '0₪',\n        active_tasks_count: 0,\n        status: 'Unavailable'\n      });\n      setStats({\n        total_properties: 0,\n        tasks_by_status: {\n          Pending: 0,\n          Done: 0\n        },\n        staff_workload: {},\n        total_capacity: 0,\n        top_staff: []\n      });\n      setTasks([]);\n    }).finally(() => {\n      if (!cancelled) setLoading(false);\n    });\n    return () => {\n      cancelled = true;\n    };\n  }, [importSuccess]);\n  const handleToggleStatus = useCallback(async (taskId, newStatus) => {\n    try {\n      await updatePropertyTaskStatus(taskId, newStatus);\n      setTasks(prev => (prev !== null && prev !== void 0 ? prev : []).map(t => t.id === taskId ? {\n        ...t,\n        status: newStatus\n      } : t));\n    } catch (e) {\n      window.alert((e === null || e === void 0 ? void 0 : e.message) || 'Failed to update');\n    }\n  }, []);\n  const tasksByStatusData = stats !== null && stats !== void 0 && stats.tasks_by_status ? [{\n    name: 'ממתינות',\n    value: stats.tasks_by_status.Pending || 0,\n    fill: TASK_CHART_COLORS[0]\n  }, {\n    name: 'הושלמו',\n    value: stats.tasks_by_status.Done || 0,\n    fill: TASK_CHART_COLORS[1]\n  }] : [];\n  const staffWorkloadData = stats !== null && stats !== void 0 && stats.staff_workload ? Object.entries(stats.staff_workload).sort((a, b) => b[1] - a[1]).slice(0, 5).map(([name, count], i) => ({\n    name: name.length > 10 ? name.slice(0, 8) + '…' : name,\n    fullName: name,\n    tasks: count,\n    fill: PIE_COLORS[i % PIE_COLORS.length]\n  })) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 dark:bg-gray-900 p-8\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-end mb-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-black text-gray-900 dark:text-white\",\n          children: \"\\u05D1\\u05D5\\u05E7\\u05E8 \\u05D8\\u05D5\\u05D1, \\u05DE\\u05E0\\u05D4\\u05DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 dark:text-gray-400\",\n          children: \"\\u05DB\\u05DC \\u05D4\\u05E0\\u05DB\\u05E1\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA \\u05EA\\u05D7\\u05EA \\u05E9\\u05DC\\u05D9\\u05D8\\u05D4. \\u05D4\\u05E0\\u05D4 \\u05DE\\u05D4 \\u05E9\\u05E7\\u05D5\\u05E8\\u05D4 \\u05D4\\u05D9\\u05D5\\u05DD.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setShowPropertyModal(true),\n        className: \"bg-black dark:bg-white text-white dark:text-gray-900 px-6 py-3 rounded-2xl font-bold hover:opacity-90 transition-all\",\n        children: \"+ \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E0\\u05DB\\u05E1 \\u05D7\\u05D3\\u05E9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\",\n      children: [/*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05D4\\u05DB\\u05E0\\u05E1\\u05D5\\u05EA \\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\",\n        value: (_summary$revenue = summary === null || summary === void 0 ? void 0 : summary.revenue) !== null && _summary$revenue !== void 0 ? _summary$revenue : '₪0',\n        icon: DollarSign,\n        color: \"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05E0\\u05DB\\u05E1\\u05D9\\u05DD\",\n        value: String((_stats$total_properti = stats === null || stats === void 0 ? void 0 : stats.total_properties) !== null && _stats$total_properti !== void 0 ? _stats$total_properti : 0),\n        icon: Home,\n        color: \"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05E7\\u05D9\\u05D1\\u05D5\\u05DC\\u05EA \\u05DB\\u05D5\\u05DC\\u05DC\\u05EA\",\n        value: String((_stats$total_capacity = stats === null || stats === void 0 ? void 0 : stats.total_capacity) !== null && _stats$total_capacity !== void 0 ? _stats$total_capacity : 0),\n        icon: Users,\n        color: \"bg-violet-50 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICard, {\n        title: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA\",\n        value: String((_stats$tasks_by_statu = stats === null || stats === void 0 ? void 0 : (_stats$tasks_by_statu2 = stats.tasks_by_status) === null || _stats$tasks_by_statu2 === void 0 ? void 0 : _stats$tasks_by_statu2.Pending) !== null && _stats$tasks_by_statu !== void 0 ? _stats$tasks_by_statu : 0),\n        icon: Activity,\n        color: \"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2 space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(AirbnbImporter, {\n          onSuccess: () => setImportSuccess(n => n + 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800/60 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm p-6 min-h-[280px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-gray-100 dark:text-white mb-4\",\n              children: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA \\u05DC\\u05E4\\u05D9 \\u05E1\\u05D8\\u05D8\\u05D5\\u05E1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), tasksByStatusData.some(d => d.value > 0) ? /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n              width: \"100%\",\n              height: 200,\n              children: /*#__PURE__*/_jsxDEV(BarChart, {\n                data: tasksByStatusData,\n                layout: \"vertical\",\n                margin: {\n                  top: 5,\n                  right: 20,\n                  left: 0,\n                  bottom: 5\n                },\n                children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                  strokeDasharray: \"3 3\",\n                  stroke: \"#e5e7eb\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                  type: \"number\",\n                  stroke: \"#6b7280\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                  type: \"category\",\n                  dataKey: \"name\",\n                  width: 70,\n                  stroke: \"#6b7280\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  contentStyle: {\n                    backgroundColor: 'rgba(255,255,255,0.95)',\n                    border: '1px solid #e5e7eb',\n                    borderRadius: 8\n                  },\n                  formatter: value => [value, 'משימות']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                  dataKey: \"value\",\n                  name: \"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\",\n                  radius: [0, 4, 4, 0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\",\n              children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E9\\u05D9\\u05DE\\u05D5\\u05EA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 min-h-[280px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4\",\n              children: \"\\u05E2\\u05D5\\u05DE\\u05E1 \\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), staffWorkloadData.length > 0 ? /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n              width: \"100%\",\n              height: 200,\n              children: /*#__PURE__*/_jsxDEV(PieChart, {\n                children: [/*#__PURE__*/_jsxDEV(Pie, {\n                  data: staffWorkloadData,\n                  dataKey: \"tasks\",\n                  nameKey: \"fullName\",\n                  cx: \"50%\",\n                  cy: \"50%\",\n                  outerRadius: 70,\n                  label: ({\n                    fullName,\n                    tasks: t\n                  }) => `${fullName}: ${t}`,\n                  children: staffWorkloadData.map((entry, i) => /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: entry.fill\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  formatter: (v, n, props) => [`${props.payload.fullName}: ${v} משימות`, '']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\",\n              children: \"\\u05D0\\u05D9\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StaffGrid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(TaskListErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(TaskTimeline, {\n            tasks: tasks !== null && tasks !== void 0 ? tasks : [],\n            loading: loading,\n            onToggleStatus: handleToggleStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuickActionStaff, {\n          topStaff: stats === null || stats === void 0 ? void 0 : stats.top_staff\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GuestChatFeed, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PropertyCreatorModal, {\n      isOpen: showPropertyModal,\n      onClose: () => setShowPropertyModal(false),\n      onSuccess: () => setImportSuccess(n => n + 1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 5\n  }, this);\n}\n_s(PremiumDashboard, \"pK26kUvB4QzEZxAewTYwW8kZvBg=\");\n_c4 = PremiumDashboard;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"TaskTimeline\");\n$RefreshReg$(_c2, \"KPICard\");\n$RefreshReg$(_c3, \"QuickActionStaff\");\n$RefreshReg$(_c4, \"PremiumDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","CheckCircle","Clock","DollarSign","Activity","Home","Users","Phone","MessageCircle","toWhatsAppPhone","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","PieChart","Pie","Cell","Legend","getDashboardSummary","getStatsSummary","getPropertyTasks","updatePropertyTaskStatus","StaffGrid","AirbnbImporter","GuestChatFeed","PropertyCreatorModal","TaskListErrorBoundary","jsxDEV","_jsxDEV","Fragment","_Fragment","TASK_CHART_COLORS","PIE_COLORS","TaskTimeline","tasks","loading","onToggleStatus","mapStatus","s","formatTime","dueAt","d","Date","toLocaleTimeString","hour","minute","length","slice","list","Array","isArray","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","task","index","status","displayName","property_name","room","capacity","property_context","timeStr","due_at","created_at","isDone","size","staff_name","staff_phone","href","String","replace","encodeURIComponent","description","title","target","rel","type","onClick","id","_c","KPICard","value","icon","Icon","color","_c2","QuickActionStaff","topStaff","callPhone","phone","window","location","i","name","e","preventDefault","_c3","PremiumDashboard","_s","_summary$revenue","_stats$total_properti","_stats$total_capacity","_stats$tasks_by_statu","_stats$tasks_by_statu2","summary","setSummary","stats","setStats","setTasks","setLoading","importSuccess","setImportSuccess","showPropertyModal","setShowPropertyModal","console","log","cancelled","Promise","all","then","st","t","catch","revenue","active_tasks_count","total_properties","tasks_by_status","Pending","Done","staff_workload","total_capacity","top_staff","finally","handleToggleStatus","taskId","newStatus","prev","alert","message","tasksByStatusData","fill","staffWorkloadData","Object","entries","sort","a","b","count","fullName","dir","onSuccess","n","some","width","height","data","layout","margin","top","right","left","bottom","strokeDasharray","stroke","dataKey","contentStyle","backgroundColor","border","borderRadius","formatter","radius","nameKey","cx","cy","outerRadius","label","entry","v","props","payload","isOpen","onClose","_c4","$RefreshReg$"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/components/dashboard/PremiumDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { CheckCircle, Clock, DollarSign, Activity, Home, Users, Phone, MessageCircle } from 'lucide-react';\nimport { toWhatsAppPhone } from '../../utils/phone';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  Legend,\n} from 'recharts';\nimport { getDashboardSummary, getStatsSummary, getPropertyTasks, updatePropertyTaskStatus } from '../../services/api';\nimport StaffGrid from './StaffGrid';\nimport AirbnbImporter from './AirbnbImporter';\nimport GuestChatFeed from '../guest/GuestChatFeed';\nimport PropertyCreatorModal from './PropertyCreatorModal';\nimport TaskListErrorBoundary from '../common/TaskListErrorBoundary';\n\nconst TASK_CHART_COLORS = ['#3b82f6', '#10b981'];\nconst PIE_COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899'];\n\nconst TaskTimeline = ({ tasks, loading, onToggleStatus = () => {} }) => {\n  const mapStatus = (s) => {\n    if (!s) return 'pending';\n    if (s === 'Done' || s === 'done' || s === 'Completed' || s === 'completed') return 'completed';\n    return 'pending';\n  };\n\n  const formatTime = (dueAt) => {\n    if (!dueAt) return '—';\n    try {\n      const d = new Date(dueAt);\n      return d.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });\n    } catch {\n      return typeof dueAt === 'string' && dueAt.length >= 16 ? dueAt.slice(11, 16) : '—';\n    }\n  };\n\n  const list = Array.isArray(tasks) ? tasks.slice(0, 12) : [];\n\n  return (\n    <div className=\"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl shadow-xl border border-gray-700/50 dark:border-gray-600/50 backdrop-blur-sm\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-100 dark:text-white\">רשימת משימות</h3>\n        <span className=\"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs font-semibold rounded-full border border-emerald-500/30\">LIVE</span>\n      </div>\n      {loading ? (\n        <div className=\"py-8 text-center text-gray-400 dark:text-gray-500\">טוען...</div>\n      ) : list.length === 0 ? (\n        <div className=\"py-8 text-center text-gray-400 dark:text-gray-500\">אין משימות כרגע</div>\n      ) : (\n        <div className=\"space-y-4\">\n          {list.map((task, index) => {\n            const status = mapStatus(task.status);\n            const displayName = task.property_name || task.room || 'נכס';\n            const capacity = task.property_context || '';\n            const timeStr = formatTime(task.due_at || task.created_at);\n            const isDone = status === 'completed';\n            return (\n              <div\n                key={task.id}\n                className=\"relative flex gap-4 p-4 rounded-2xl bg-gray-800/60 dark:bg-gray-700/40 border border-gray-700/50 dark:border-gray-600/40 hover:border-gray-600/60 transition-colors\"\n              >\n                <div\n                  className={`z-10 w-9 h-9 rounded-xl flex items-center justify-center shrink-0 ${\n                    isDone ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30' : 'bg-amber-500/20 text-amber-400 border border-amber-500/30'\n                  }`}\n                >\n                  {isDone ? <CheckCircle size={18} /> : <Clock size={18} />}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex justify-between items-start gap-2\">\n                    <div>\n                      <p className=\"text-sm font-bold text-gray-100 dark:text-white truncate\">{displayName}</p>\n                      {capacity && (\n                        <p className=\"text-xs text-gray-400 dark:text-gray-400 mt-0.5\">{capacity}</p>\n                      )}\n                    </div>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400 shrink-0\">{timeStr}</span>\n                  </div>\n                  <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2\">\n                    <span className=\"text-xs text-gray-400 dark:text-gray-400\">{task.staff_name || '—'}</span>\n                    {task.staff_phone ? (\n                      <>\n                        <a\n                          href={`tel:${String(task.staff_phone).replace(/\\D/g, '')}`}\n                          className=\"text-xs font-medium text-blue-400 hover:text-blue-300 hover:underline inline-flex items-center gap-1\"\n                        >\n                          <Phone size={12} />\n                          {task.staff_phone}\n                        </a>\n                        <a\n                          href={`https://wa.me/${toWhatsAppPhone(task.staff_phone)}?text=${encodeURIComponent(`Hi ${task.staff_name || ''}, regarding: ${(task.description || task.title || '').slice(0, 80)}. Please handle when possible.`)}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-green-500 hover:text-green-400 inline-flex\"\n                          title=\"WhatsApp\"\n                        >\n                          <MessageCircle size={14} />\n                        </a>\n                      </>\n                    ) : null}\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => onToggleStatus(task.id, isDone ? 'Pending' : 'Done')}\n                    className={`mt-3 inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1.5 rounded-lg transition-colors ${\n                      isDone\n                        ? 'text-amber-400 hover:bg-amber-500/20 border border-amber-500/30'\n                        : 'text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/30'\n                    }`}\n                  >\n                    {isDone ? (\n                      <>חזרה לממתין</>\n                    ) : (\n                      <><CheckCircle size={14} /> סמן כהושלם</>\n                    )}\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst KPICard = ({ title, value, icon: Icon, color }) => (\n  <div className=\"bg-white dark:bg-gray-800 p-6 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center gap-4\">\n    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center ${color}`}>\n      <Icon size={24} />\n    </div>\n    <div>\n      <p className=\"text-xs text-gray-400 dark:text-gray-400 font-medium\">{title}</p>\n      <h4 className=\"text-2xl font-black text-gray-100 dark:text-white\">{value}</h4>\n    </div>\n  </div>\n);\n\nconst QuickActionStaff = ({ topStaff }) => {\n  const callPhone = (phone) => {\n    if (!phone) return;\n    window.location.href = `tel:${phone.replace(/\\D/g, '')}`;\n  };\n  if (!topStaff?.length) return null;\n  return (\n    <div className=\"p-6 bg-gray-900/50 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm\">\n      <h3 className=\"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2\">\n        <Phone size={20} className=\"text-blue-500\" />\n        קשר מהיר\n      </h3>\n      <div className=\"space-y-3\">\n        {topStaff.map((s, i) => (\n          <div\n            key={i}\n            className=\"flex justify-between items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n          >\n            <span className=\"font-medium text-gray-100 dark:text-white\">{s.name}</span>\n            <a\n              href={`tel:${(s.phone || '').replace(/\\D/g, '')}`}\n              onClick={(e) => { e.preventDefault(); callPhone(s.phone); }}\n              className=\"text-blue-600 dark:text-blue-400 font-medium text-sm hover:underline\"\n            >\n              {s.phone}\n            </a>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default function PremiumDashboard() {\n  const [summary, setSummary] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [importSuccess, setImportSuccess] = useState(0);\n  const [showPropertyModal, setShowPropertyModal] = useState(false);\n\n  useEffect(() => {\n    console.log('[PremiumDashboard] load data, importSuccess=', importSuccess);\n    let cancelled = false;\n    setLoading(true);\n    Promise.all([getDashboardSummary(), getStatsSummary(), getPropertyTasks()])\n      .then(([s, st, t]) => {\n        if (cancelled) return;\n        setSummary(s ?? null);\n        setStats(st ?? null);\n        setTasks(Array.isArray(t) ? t : []);\n      })\n      .catch((e) => {\n        if (cancelled) return;\n        setSummary({ revenue: '0₪', active_tasks_count: 0, status: 'Unavailable' });\n        setStats({ total_properties: 0, tasks_by_status: { Pending: 0, Done: 0 }, staff_workload: {}, total_capacity: 0, top_staff: [] });\n        setTasks([]);\n      })\n      .finally(() => {\n        if (!cancelled) setLoading(false);\n      });\n    return () => { cancelled = true; };\n  }, [importSuccess]);\n\n  const handleToggleStatus = useCallback(async (taskId, newStatus) => {\n    try {\n      await updatePropertyTaskStatus(taskId, newStatus);\n      setTasks((prev) => (prev ?? []).map((t) => (t.id === taskId ? { ...t, status: newStatus } : t)));\n    } catch (e) {\n      window.alert(e?.message || 'Failed to update');\n    }\n  }, []);\n\n  const tasksByStatusData = stats?.tasks_by_status\n    ? [\n        { name: 'ממתינות', value: stats.tasks_by_status.Pending || 0, fill: TASK_CHART_COLORS[0] },\n        { name: 'הושלמו', value: stats.tasks_by_status.Done || 0, fill: TASK_CHART_COLORS[1] },\n      ]\n    : [];\n  const staffWorkloadData = stats?.staff_workload\n    ? Object.entries(stats.staff_workload)\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 5)\n        .map(([name, count], i) => ({\n          name: name.length > 10 ? name.slice(0, 8) + '…' : name,\n          fullName: name,\n          tasks: count,\n          fill: PIE_COLORS[i % PIE_COLORS.length],\n        }))\n    : [];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-8\" dir=\"rtl\">\n      <div className=\"flex justify-between items-end mb-10\">\n        <div>\n          <h1 className=\"text-3xl font-black text-gray-900 dark:text-white\">בוקר טוב, מנהל</h1>\n          <p className=\"text-gray-500 dark:text-gray-400\">כל הנכסים שלך תחת שליטה. הנה מה שקורה היום.</p>\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => setShowPropertyModal(true)}\n          className=\"bg-black dark:bg-white text-white dark:text-gray-900 px-6 py-3 rounded-2xl font-bold hover:opacity-90 transition-all\"\n        >\n          + הוסף נכס חדש\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\">\n        <KPICard\n          title=\"הכנסות החודש\"\n          value={summary?.revenue ?? '₪0'}\n          icon={DollarSign}\n          color=\"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400\"\n        />\n        <KPICard\n          title=\"נכסים\"\n          value={String(stats?.total_properties ?? 0)}\n          icon={Home}\n          color=\"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\"\n        />\n        <KPICard\n          title=\"קיבולת כוללת\"\n          value={String(stats?.total_capacity ?? 0)}\n          icon={Users}\n          color=\"bg-violet-50 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400\"\n        />\n        <KPICard\n          title=\"משימות פעילות\"\n          value={String(stats?.tasks_by_status?.Pending ?? 0)}\n          icon={Activity}\n          color=\"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400\"\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2 space-y-8\">\n          <AirbnbImporter onSuccess={() => setImportSuccess((n) => n + 1)} />\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-gray-800/60 dark:bg-gray-800/80 rounded-3xl border border-gray-700/50 dark:border-gray-600/50 shadow-xl backdrop-blur-sm p-6 min-h-[280px]\">\n              <h3 className=\"text-lg font-bold text-gray-100 dark:text-white mb-4\">משימות לפי סטטוס</h3>\n              {tasksByStatusData.some((d) => d.value > 0) ? (\n                <ResponsiveContainer width=\"100%\" height={200}>\n                  <BarChart data={tasksByStatusData} layout=\"vertical\" margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                    <XAxis type=\"number\" stroke=\"#6b7280\" />\n                    <YAxis type=\"category\" dataKey=\"name\" width={70} stroke=\"#6b7280\" />\n                    <Tooltip\n                      contentStyle={{ backgroundColor: 'rgba(255,255,255,0.95)', border: '1px solid #e5e7eb', borderRadius: 8 }}\n                      formatter={(value) => [value, 'משימות']}\n                    />\n                    <Bar dataKey=\"value\" name=\"משימות\" radius={[0, 4, 4, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\">אין משימות</div>\n              )}\n            </div>\n            <div className=\"bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 min-h-[280px]\">\n              <h3 className=\"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4\">עומס עובדים</h3>\n              {staffWorkloadData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height={200}>\n                  <PieChart>\n                    <Pie\n                      data={staffWorkloadData}\n                      dataKey=\"tasks\"\n                      nameKey=\"fullName\"\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      outerRadius={70}\n                      label={({ fullName, tasks: t }) => `${fullName}: ${t}`}\n                    >\n                      {staffWorkloadData.map((entry, i) => (\n                        <Cell key={i} fill={entry.fill} />\n                      ))}\n                    </Pie>\n                    <Tooltip formatter={(v, n, props) => [`${props.payload.fullName}: ${v} משימות`, '']} />\n                    <Legend />\n                  </PieChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-[200px] flex items-center justify-center text-gray-400 dark:text-gray-500\">אין נתונים</div>\n              )}\n            </div>\n          </div>\n          <StaffGrid />\n        </div>\n        <div className=\"space-y-8\">\n          <TaskListErrorBoundary>\n            <TaskTimeline tasks={tasks ?? []} loading={loading} onToggleStatus={handleToggleStatus} />\n          </TaskListErrorBoundary>\n          <QuickActionStaff topStaff={stats?.top_staff} />\n          <GuestChatFeed />\n        </div>\n      </div>\n\n      <PropertyCreatorModal\n        isOpen={showPropertyModal}\n        onClose={() => setShowPropertyModal(false)}\n        onSuccess={() => setImportSuccess((n) => n + 1)}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}