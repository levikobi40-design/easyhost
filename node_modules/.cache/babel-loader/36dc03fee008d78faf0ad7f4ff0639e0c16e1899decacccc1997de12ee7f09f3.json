{"ast":null,"code":"import React,{useEffect,useState}from'react';import{MessageCircle,ArrowDownLeft,ArrowUpRight}from'lucide-react';import{getMessages}from'../../services/api';import'./WhatsAppMonitor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WhatsAppMonitor=()=>{const[messages,setMessages]=useState([]);useEffect(()=>{let isActive=true;const loadMessages=async()=>{try{const data=await getMessages(50);if(isActive)setMessages(data);}catch(error){console.error('Failed to load messages:',error);}};loadMessages();const interval=setInterval(loadMessages,10000);return()=>{isActive=false;clearInterval(interval);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"whatsapp-monitor glass-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"monitor-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(MessageCircle,{size:18}),\" WhatsApp Monitor\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"monitor-count\",children:[messages.length,\" messages\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"monitor-list\",children:messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"monitor-empty\",children:\"No messages yet.\"}):messages.map(msg=>/*#__PURE__*/_jsxs(\"div\",{className:`monitor-item ${msg.direction}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"monitor-icon\",children:msg.direction==='inbound'?/*#__PURE__*/_jsx(ArrowDownLeft,{size:16}):/*#__PURE__*/_jsx(ArrowUpRight,{size:16})}),/*#__PURE__*/_jsxs(\"div\",{className:\"monitor-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"monitor-text\",children:msg.content}),/*#__PURE__*/_jsx(\"span\",{className:\"monitor-time\",children:new Date(msg.created_at).toLocaleTimeString()})]})]},msg.id))})]});};export default WhatsAppMonitor;","map":{"version":3,"names":["React","useEffect","useState","MessageCircle","ArrowDownLeft","ArrowUpRight","getMessages","jsx","_jsx","jsxs","_jsxs","WhatsAppMonitor","messages","setMessages","isActive","loadMessages","data","error","console","interval","setInterval","clearInterval","className","children","size","length","map","msg","direction","content","Date","created_at","toLocaleTimeString","id"],"sources":["C:/Users/user/Desktop/hotel_ai_assistant/hotel_dashboard/src/components/operator/WhatsAppMonitor.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { MessageCircle, ArrowDownLeft, ArrowUpRight } from 'lucide-react';\nimport { getMessages } from '../../services/api';\nimport './WhatsAppMonitor.css';\n\nconst WhatsAppMonitor = () => {\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    let isActive = true;\n    const loadMessages = async () => {\n      try {\n        const data = await getMessages(50);\n        if (isActive) setMessages(data);\n      } catch (error) {\n        console.error('Failed to load messages:', error);\n      }\n    };\n    loadMessages();\n    const interval = setInterval(loadMessages, 10000);\n    return () => {\n      isActive = false;\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <div className=\"whatsapp-monitor glass-card\">\n      <div className=\"monitor-header\">\n        <h3><MessageCircle size={18} /> WhatsApp Monitor</h3>\n        <span className=\"monitor-count\">{messages.length} messages</span>\n      </div>\n      <div className=\"monitor-list\">\n        {messages.length === 0 ? (\n          <div className=\"monitor-empty\">No messages yet.</div>\n        ) : (\n          messages.map((msg) => (\n            <div key={msg.id} className={`monitor-item ${msg.direction}`}>\n              <div className=\"monitor-icon\">\n                {msg.direction === 'inbound' ? <ArrowDownLeft size={16} /> : <ArrowUpRight size={16} />}\n              </div>\n              <div className=\"monitor-content\">\n                <span className=\"monitor-text\">{msg.content}</span>\n                <span className=\"monitor-time\">{new Date(msg.created_at).toLocaleTimeString()}</span>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default WhatsAppMonitor;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,aAAa,CAAEC,aAAa,CAAEC,YAAY,KAAQ,cAAc,CACzE,OAASC,WAAW,KAAQ,oBAAoB,CAChD,MAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,GAAI,CAAAa,QAAQ,CAAG,IAAI,CACnB,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAV,WAAW,CAAC,EAAE,CAAC,CAClC,GAAIQ,QAAQ,CAAED,WAAW,CAACG,IAAI,CAAC,CACjC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CACDF,YAAY,CAAC,CAAC,CACd,KAAM,CAAAI,QAAQ,CAAGC,WAAW,CAACL,YAAY,CAAE,KAAK,CAAC,CACjD,MAAO,IAAM,CACXD,QAAQ,CAAG,KAAK,CAChBO,aAAa,CAACF,QAAQ,CAAC,CACzB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACET,KAAA,QAAKY,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1Cb,KAAA,QAAKY,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7Bb,KAAA,OAAAa,QAAA,eAAIf,IAAA,CAACL,aAAa,EAACqB,IAAI,CAAE,EAAG,CAAE,CAAC,oBAAiB,EAAI,CAAC,cACrDd,KAAA,SAAMY,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEX,QAAQ,CAACa,MAAM,CAAC,WAAS,EAAM,CAAC,EAC9D,CAAC,cACNjB,IAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BX,QAAQ,CAACa,MAAM,GAAK,CAAC,cACpBjB,IAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,kBAAgB,CAAK,CAAC,CAErDX,QAAQ,CAACc,GAAG,CAAEC,GAAG,eACfjB,KAAA,QAAkBY,SAAS,CAAE,gBAAgBK,GAAG,CAACC,SAAS,EAAG,CAAAL,QAAA,eAC3Df,IAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BI,GAAG,CAACC,SAAS,GAAK,SAAS,cAAGpB,IAAA,CAACJ,aAAa,EAACoB,IAAI,CAAE,EAAG,CAAE,CAAC,cAAGhB,IAAA,CAACH,YAAY,EAACmB,IAAI,CAAE,EAAG,CAAE,CAAC,CACpF,CAAC,cACNd,KAAA,QAAKY,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9Bf,IAAA,SAAMc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEI,GAAG,CAACE,OAAO,CAAO,CAAC,cACnDrB,IAAA,SAAMc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE,GAAI,CAAAO,IAAI,CAACH,GAAG,CAACI,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAO,CAAC,EAClF,CAAC,GAPEL,GAAG,CAACM,EAQT,CACN,CACF,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}